<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>RO Calculator</title>
    <script src="https://unpkg.com/vue"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>

    <!-- <style type="text/css">
        #equipinput {
            display: inline;
            padding: 0 20px;
        }
    </style> -->
</head>

<body>

    <div class="Equipment" id="equipment">
        <el-input v-model="equipname" placeholder="裝備名稱"></el-input>
        <div class="Input" id="equipinput">
            <el-select value-key="id" v-model="input.EffectType" v-on:change="onSelectedDrug" 
                placeholder="Select Effect">
                <el-option v-for="item in types" :key="item.id" :label="item.label" :value="item">
                </el-option>
            </el-select>
            <el-input v-model="input.EffectNumber" placeholder="Effect Value"></el-input>
            <el-button v-on:click="AddEffect" type="primary" plain>+</el-button>
        </div>
        <div class="Item" v-for="(item, index) in contacts" v-bind:key="item.types">
            <div style="box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 12px 0px;">
                <span class="EffectType">{{ item.EffectType}}</span>
                <span>/</span>
                <span class="EffectNumber">{{ item.EffectNumber}}</span>
                <el-button v-on:click="RemoveEffect" type="primary" plain>-</el-button>
            </div>
        </div>
    </div>

    <script>
        evue = new Vue({
            el: '#equipment',
            data: {
                equipname: '',
                contacts: [],
                blockRemoval: true,
                types: [
                    { label: 'ATK', id: 'ATK' },
                    { label: 'ATK%', id: 'ATKPercent' },
                    { label: 'Matk', id: 'Matk' },
                    { label: 'Matk%', id: 'MatkPercent' }
                ],
                input: {
                    EffectType: this.types,
                    EffectNumber: ''
                }
            },
            methods: {
                AddEffect() {
                    // let obj = {};
                    // obj = this.types.find((item)=>{
                    //     return item.id === this.input.EffectType;
                    // });
                    // console.log(obj.id);
                    this.contacts.push({
                        EffectNumber: this.input.EffectNumber,
                        EffectType: this.input.EffectType.label,
                    })
                    console.log("AddEffect Type: " + this.input.EffectType + " /" + this.input.EffectNumber);
                },
                RemoveEffect(index) {
                    console.log("RemoveEffect: " + index);
                },
                onSelectedDrug(item) {
                    console.log("onSelectedDrug " + item.label);
                    //this.input.EffectType = item.label;
                },
            },
            mounted() {
                console.log("mounted");
            }
        })
    </script>

    <body>

</html>