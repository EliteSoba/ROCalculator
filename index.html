<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>RO Calculator</title>
    <!-- 
    <script src="https://unpkg.com/vue"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="https://unpkg.com/linq"></script>
    -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.13.0/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.13.0/theme-chalk/index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/linq.js/2.2.0.2/linq.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63581889-2"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-63581889-2');
    </script>

    <style>
        [v-cloak] {
            display: none;
        }
        .el-row {
            margin-bottom: 2px;
        }

        .el-col {
            border-radius: 4px;
        }

        .bg-purple-dark {
            background: #99a9bf;
            background: #305079;
        }

        .bg-purple {
            background: #d3dce6;
        }

        .bg-purple-light {
            background: #e5e9f2;
        }

        .grid-content {
            border-radius: 4px;
            min-height: 36px;
        }

        .row-bg {
            padding: 10px 0;
            background-color: #f9fafc;
        }

        .ROCalTitle {
            height: 50px;
            position: relative;
            color: white;
            background: #303133;
            border-radius: 4px;
        }

        .ROCalFooter {
            height: 35px;
            color: white;
            background: #303133;
            border-radius: 4px;
        }

        .bodycol-container {
            height: calc(100vh - (50px + 35px + 8px));
        }

        .Dialogue-container {
            height: calc(100vh - (50px + 35px + 24px));
        }

        .SkillList-container {
            height: calc(100vh - (50px + 35px + 16px + 50px + 190px + 40px));
        }

        .EffectList-container {
            height: calc(100vh - (50px + 35px + 8px + 300px));
        }

        .DBlist-container {
            height: calc(40vh - (50px));
        }

        .effectline {
            line-height: 3;
            margin: auto;
        }

        .skilltag {
            border: 1px solid #0c7a47;
            border-radius: 4px;
            text-align: center;
        }

        .boxborder {
            padding: 5px 5px;
            border: 1px solid #d7dae2;
            border-radius: 4px;
            min-height: 100px;
        }

        .statusbox {
            border: 1px solid #d7dae2;
            border-radius: 2px;
            min-height: 40px;
        }

        .optionbox {
            border: 1px solid #d7dae2;
            border-radius: 2px;
            min-height: 40px;
            text-align: center;
        }

        .optionsubbox {
            border-radius: 2px;
            min-height: 40px;
            text-align: center;
            background: #6de4a2;
        }

        .textcenter {
            text-align: center;
        }

        .titlebox {
            border: 1px solid #d7dae2;
            border-radius: 2px;
            min-height: 40px;
            text-align: center;
            background: #606266;
            color: white;
        }

        .subtitlebox {
            border: 1px solid #d7dae2;
            border-radius: 2px;
            min-height: 40px;
            text-align: center;
            background: #DCDFE6;
        }

        a:visited,
        a:link {
            text-decoration: none !important;
            color: white;
        }
    </style>
</head>

<body>
    <div id="App" v-cloak>

        <el-dialog :visible.sync="UIPanel['SpecialthanksPanel']" v-on:close="ClosePanel('SpecialthanksPanel')"
            custom-class="Dialogue-container" width="30%" top="58px" center>
            <span slot="title">特別感謝</span>
            <el-row :gutter="6">
                <el-scrollbar wrap-class="SkillList-container" :native="false" :noresize="false">
                    <div v-for="(item, index) in SpecialthanksList" v-bind:key="item.id">
                        <div style="padding: 2px 5px;">
                            <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                style="height:40px;">
                                <el-col class="textcenter" :span="10">
                                    <span class="">{{ item.coop }}</span>
                                </el-col>
                                <el-col class="textcenter" :span="10" style="text-align: left;">
                                    <span class="">{{ item.name }}</span>
                                </el-col>
                            </el-row>
                        </div>
                    </div>
                </el-scrollbar>
            </el-row>
        </el-dialog>
        <el-dialog :visible.sync="UIPanel['SkillDBDialog']" custom-class="Dialogue-container" width="70%" top="58px"
            v-on:close="ClosePanel('SkillDBDialog')" center>
            <span slot="title">技能清單</span>
            <el-row class="statusbox titlebox" :gutter="6" type="flex" align="middle">
                <el-col style="padding: 5px 5px;">
                    <el-row :gutter="6" type="flex" align="middle">
                        <el-col class="textcenter" :span="4">
                            技能名:
                        </el-col>
                        <el-col class="textcenter" :span="10">
                            <div>
                                <el-input v-model="skill.name" placeholder="技能名">
                                </el-input>
                            </div>
                        </el-col>
                    </el-row>
                    <el-row :gutter="6" type="flex" align="middle">
                        <el-col class="textcenter" :span="4">
                            公式:
                        </el-col>
                        <el-col :span="20">
                            <div>
                                <el-input v-model="skill.formula" placeholder="公式">
                                </el-input>
                            </div>
                        </el-col>
                    </el-row>
                    <el-row :gutter="6" type="flex" align="middle">
                        <el-col class="textcenter" :span="2">
                            技能等級:
                        </el-col>
                        <el-col :span="2">
                            <el-input v-model="skill.level" placeholder="等級">
                            </el-input>
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            次數:
                        </el-col>
                        <el-col :span="2">
                            <el-input v-model="skill.hitnumber" placeholder="次數">
                            </el-input>
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            遠傷
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            <el-switch v-model="skill.ranged" active-color="#13ce66" inactive-color="#8a9799">
                            </el-switch>
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            暴擊
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            <el-switch v-model="skill.critical" active-color="#13ce66" inactive-color="#8a9799">
                            </el-switch>
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            加農砲彈
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            <el-switch v-model="skill.cannon" active-color="#13ce66" inactive-color="#8a9799">
                            </el-switch>
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            半無視防禦
                        </el-col>
                        <el-col class="textcenter" :span="2">
                            <el-switch v-model="skill.transWeaponDEF" active-color="#13ce66" inactive-color="#8a9799">
                            </el-switch>
                        </el-col>
                    </el-row>
                    <el-row :gutter="6" type="flex" align="middle">
                        <el-col class="textcenter" :span="20" style="color: red;">
                            {{option.SkillFormulaError}}
                        </el-col>
                        <el-col class="textcenter" :span="4">
                            <el-button v-on:click="onSaveSkill" size="small">
                                儲存技能
                            </el-button>
                        </el-col>
                    </el-row>
                </el-col>
            </el-row>
            <el-row class="statusbox titlebox" :gutter="6" type="flex" align="middle">
                <el-col class="textcenter" :span="4">
                    <span class="">技能名</span>
                </el-col>
                <el-col class="textcenter" :span="12">
                    <span>公式</span>
                </el-col>
                <el-col class="textcenter" :span="8">
                </el-col>
            </el-row>
            <el-row :gutter="6">
                <el-scrollbar wrap-class="SkillList-container" :native="false" :noresize="false">
                    <div v-for="(item, index) in StoreDB_Skill" v-bind:key="item.uuid">
                        <div style="padding: 2px 5px;">
                            <el-row class="optionbox effectline" :gutter="4" type="flex" align="middle">
                                <el-col class="textcenter" :span="6">
                                    <span class="">{{ item.skill.name }}</span>
                                </el-col>
                                <el-col class="bg-purple-light" style="padding: 0px 15px;">
                                    <el-row class="effectline" :gutter="4" type="flex" align="middle">
                                        <el-col style="text-align: left;">
                                            <span>{{ item.skill.formula }}</span>
                                        </el-col>
                                    </el-row>
                                    <el-row class="effectline" :gutter="5" type="flex" align="middle">
                                        <el-col class="textcenter" :span="4">
                                            技能等級:
                                        </el-col>
                                        <el-col :span="2">
                                            <span>{{ item.skill.level }}</span>
                                        </el-col>
                                        <el-col class="textcenter" :span="2">
                                            次數:
                                        </el-col>
                                        <el-col :span="2">
                                            <span>{{ item.skill.hitnumber }}</span>
                                        </el-col>
                                        <el-col v-if="item.skill.ranged" class="skilltag" :span="2">
                                            遠傷
                                        </el-col>
                                        <el-col v-if="item.skill.critical" class="skilltag" :span="2">
                                            暴擊
                                        </el-col>
                                        <el-col v-if="item.skill.cannon" class="skilltag" :span="2">
                                            砲彈
                                        </el-col>
                                        <el-col v-if="item.skill.transWeaponDEF" class="skilltag" :span="5">
                                            半無視防禦
                                        </el-col>
                                    </el-row>
                                </el-col>
                                <el-col :span="4">
                                    <el-button v-on:click="onRemoveSkillSave(index)" icon="el-icon-delete" type="danger"
                                        size="mini">
                                    </el-button>
                                </el-col>
                                <el-col :span="6">
                                    <el-button v-on:click="onLoadSkillSave(index)" icon="el-icon-check" type="success"
                                        type="primary" size="small">
                                        載入
                                    </el-button>
                                </el-col>
                            </el-row>
                        </div>
                    </div>
                </el-scrollbar>
            </el-row>
        </el-dialog>
        <el-dialog :visible.sync="UIPanel['QuickCalcDialog']" width="80%" height="80%"
            v-on:close="ClosePanel('QuickCalcDialog')">
            <span slot="title">簡易計算機</span>
            <el-row class="statusbox" :gutter="6" type="flex" align="middle">
                <el-col class="textcenter" :span="4">
                    算式:
                </el-col>
                <el-col :span="20">
                    <div>
                        <el-input v-model="QuickCalc.formula" v-on:change="onQuickCalcInput" placeholder="算式">
                        </el-input>
                    </div>
                </el-col>
            </el-row>
            <el-row class="statusbox titlebox" style="min-height: 40px;" :gutter="6" type="flex" align="middle">
                <el-col class="textcenter" :span="4">
                    計算結果
                </el-col>
                <el-col class="textcenter" :span="20">
                    <div>
                        {{QuickCalc.solution}}
                    </div>
                </el-col>
            </el-row>
            <el-row class="statusbox" :gutter="6" type="flex" align="middle">
                <el-col class="textcenter" :span="4">
                    備註:
                </el-col>
                <el-col class="textcenter" :span="20">
                    <div>
                        <el-input v-model="QuickCalc.remark" placeholder="備註">
                        </el-input>
                    </div>
                </el-col>
            </el-row>
            <el-row class="statusbox titlebox" :gutter="6" type="flex" align="middle">
                <el-col class="textcenter" :span="4">
                    <span class="">備註</span>
                </el-col>
                <el-col class="textcenter">
                    <span>算式</span>
                </el-col>
                <el-col class="textcenter" :span="4">
                    <span class="">計算結果</span>
                </el-col>
            </el-row>
            <el-row :gutter="6">
                <el-scrollbar wrap-class="DBlist-container" :native="false" :noresize="false">
                    <div v-for="(item, index) in StoreDB_QuickCalc" v-bind:key="item.uuid">
                        <div style="padding: 2px 5px;">
                            <el-row class="optionbox effectline" :gutter="4" type="flex" align="middle">
                                <el-col class="textcenter" :span="4">
                                    <span class="">{{ item.remark }}</span>
                                </el-col>
                                <el-col class="textcenter">
                                    <span>{{ item.formula }}</span>
                                </el-col>
                                <el-col class="textcenter" :span="6">
                                    <span class="">{{ item.solution }}</span>
                                </el-col>
                            </el-row>
                        </div>
                    </div>
                </el-scrollbar>
            </el-row>
        </el-dialog>
        <el-dialog :visible.sync="UIPanel['EquipEffectDialog']" custom-class="EffectList-container" width="50%" top="58px"
            v-on:close="ClosePanel('EquipEffectDialog')" center>
            <span slot="title">增加 <b>{{EquipSelectLabel}}</b> 裝備效果</span>
            <div class="statusbox titlebox" style="padding: 5px 5px; height: 40px;">
                <el-row :gutter="6" type="flex" align="middle">
                    <el-col class="textcenter" :span="11">
                            <el-select value-key="id" v-model="effectdialogue.EffectType" v-on:change="onSelectedDrug"
                                placeholder="選擇效果">
                                <el-option v-for="item in effecttypelist" :key="item.id" :label="item.label" :value="item">
                                </el-option>
                            </el-select>
                    </el-col>
                    <el-col class="textcenter" :span="8">
                            <el-input v-model.number="effectdialogue.EffectNumber" v-on:keyup.enter.native="AddEffect"
                                placeholder="效果參數">
                            </el-input>
                    </el-col>
                    <el-col class="textcenter" :span="5">
                            <el-button v-on:click="AddEffect" type="success" plain>
                                確定增加
                            </el-button>
                    </el-col>
                </el-row>
            </div>
            <div class="statusbox titlebox" style="padding: 2px 5px; height: 250px;">
                <div v-for="(item, index) in effecttypelist" v-bind:key="item.id">
                        <el-col :span="4" style="padding: 5px 0px;">
                            <el-button v-on:click="onSelectEffect(item)" size="small">
                                {{item.label}}
                            </el-button>
                        </el-col>
                </div>
            </div>
        </el-dialog>
        <el-dialog :visible.sync="UIPanel['EquipDBDialog']" v-on:close="ClosePanel('EquipDBDialog')"
            custom-class="Dialogue-container" width="70%" top="58px" center>
            <span slot="title">裝備清單</span>
            <el-row :gutter="6">
                    <div class="statusbox titlebox" style="padding: 5px 5px;">
                <el-row :gutter="4" type="flex" align="middle" style="height:80px;">
                        <el-col class="textcenter" :span="3">
                            篩選
                        </el-col>
                        <el-col class="textcenter" :span="3">
                            <el-button v-on:click="onFliterEquipClear" >
                                清空
                            </el-button>
                        </el-col>
                        <el-col class="textcenter" style="text-align: left;">
                                <el-checkbox-group v-model="StoreDB_EquipFliterGroup" v-on:change="onFliterEquipPart"
                                fill="#909399" text-color="white">
                                    <el-checkbox-button v-for="item in equipspartlist" :label="item.label" :key="item.id">
                                        {{item.label}}
                                    </el-checkbox-button>
                                </el-checkbox-group>
                        </el-col>
                </el-row>
                    </div>
                <div class="statusbox titlebox" style="padding: 5px 5px;">
                    <el-row  :gutter="4" type="flex" align="middle" style="height:40px;">
                        <el-col class="textcenter" :span="4" style="text-align: right;">
                            <span class=""><b>部位</b></span>
                        </el-col>
                        <el-col class="textcenter">
                            <span class=""><b>裝備名字</b></span>
                        </el-col>
                        <el-col :span="4">
                        </el-col>
                        <el-col :span="6">
                        </el-col>
                        <el-col :span="5">
                        </el-col>
                    </el-row>
                </div>
                <el-scrollbar wrap-class="SkillList-container" :native="false" :noresize="false">
                <div v-for="(item, index) in StoreDB_EquipFiltered" v-bind:key="item.uuid">
                    <div style="padding: 2px 5px;">
                        <el-row class="optionbox effectline" :gutter="4" type="flex" align="middle">

                            <el-col class="textcenter" :span="4" style="text-align: right;">
                                <span class="EffectType">{{ item.equip.label }}</span>
                            </el-col>
                            <el-col class="textcenter bg-purple-light">
                                <span class="">{{ item.equip.equipname }}</span>
                            </el-col>
                            <el-col :span="4">
                                <el-button v-on:click="onRemoveEquipSave(item.uuid)" icon="el-icon-delete" type="danger"
                                    size="mini">
                                </el-button>
                            </el-col>
                            <el-col :span="6">
                                <el-button v-on:click="onLoadEquipSave(item.uuid)" icon="el-icon-check" type="success"
                                    type="primary" size="small">
                                    載入
                                </el-button>
                            </el-col>
                            <el-col :span="5">
                            </el-col>
                        </el-row>
                    </div>
                </div>
                </el-scrollbar>
            </el-row>
        </el-dialog>
        <el-dialog :visible.sync="UIPanel['StatusDBDialog']" v-on:close="ClosePanel('StatusDBDialog')"
            custom-class="Dialogue-container" width="70%" top="58px" center>
            <span slot="title">角色清單</span>
            <el-row class="statusbox titlebox" :gutter="6">
                <div style="padding: 5px 5px;">
                    <el-row :gutter="4" type="flex" align="middle" style="height:40px;">
                        <el-col class="textcenter">
                            <span>目前素質</span>
                        </el-col>
                    </el-row>
                    <el-row :gutter="4" type="flex" align="middle" style="height:40px;">
                        <el-col :span="8">
                            <span>存檔名字</span>
                        </el-col>
                        <el-col class="textcenter" :span="8">
                            <el-input v-model="StatusName" v-on:keyup.enter.native="AddEffect" placeholder="要儲存的角色名字">
                            </el-input>
                        </el-col>
                        <el-col class="textcenter">
                            <span class="">{{StatusBulidString}}</span>
                        </el-col>
                        <el-col class="textcenter" :span="5">
                            <el-tooltip class="item" effect="dark" content="儲存" placement="right">
                                <el-button v-on:click="onSaveStatus" icon="el-icon-collection-tag">
                                    儲存角色素質
                                </el-button>
                            </el-tooltip>
                        </el-col>
                    </el-row>
                </div>
            </el-row>
            <el-row>
                <div style="padding: 5px 5px;">
                    <el-row class="statusbox titlebox" :gutter="4" type="flex" align="middle" style="height:40px;">
                        <el-col class="textcenter" :span="8">
                            <span class=""><b>角色名字</b></span>
                        </el-col>
                        <el-col class="textcenter">
                            <span class=""><b>素質</b></span>
                        </el-col>
                        <el-col :span="10">
                        </el-col>
                    </el-row>
                </div>
            </el-row>
            <el-row>
                <el-scrollbar wrap-class="SkillList-container" :native="false" :noresize="false">
                    <div v-for="(item, index) in StoreDB_Status" v-bind:key="item.uuid">
                        <div style="padding: 2px 5px;">
                            <el-row class="optionbox effectline" :gutter="4" type="flex" align="middle">

                                <el-col class="textcenter" :span="8">
                                    <span>{{ item.name }}</span>
                                </el-col>
                                <el-col class="textcenter">
                                    <span class="">{{ item.statusstring }}</span>
                                </el-col>
                                <el-col :span="4">
                                    <el-button v-on:click="onRemoveStatusSave(index)" icon="el-icon-delete"
                                        type="danger" size="mini">
                                    </el-button>
                                </el-col>
                                <el-col :span="6">
                                    <el-button v-on:click="onLoadStatusSave(index)" icon="el-icon-check" type="success"
                                        type="primary" size="small">
                                        載入
                                    </el-button>
                                </el-col>
                            </el-row>
                        </div>
                    </div>
                </el-scrollbar>
            </el-row>
        </el-dialog>
        <!-- header -->
        <div class="ROCalTitle">
            <el-row type="flex" align="middle" justify="space-around">
                <el-col :span="2">
                </el-col>
                <el-col :span="1">
                </el-col>
                <el-col :span="14">
                    <div class="effectline grid-content" type="flex" align="middle" justify="space-around">
                        <span>RO 計算機</span>
                    </div>
                </el-col>
                <el-col :span="1">
                    <el-button v-on:click="TogglePanel('QuickCalcDialog')" size="small">
                        小計算機
                    </el-button>
                </el-col>
                <el-col :span="2">
                    <el-button v-on:click="TogglePanel('SpecialthanksPanel')" size="small">
                        協力成員
                    </el-button>
                </el-col>
            </el-row>
        </div>
        <!-- main -->
        <div>
            <el-row :gutter="2">
                <el-col :span="8">
                    <el-scrollbar wrap-class="bodycol-container" :native="true" :noresize="false">
                        <el-row class="titlebox" type="flex" align="middle" justify="space-around" style="height:40px;">
                            <el-col class="textcenter" :span="6">
                                <span class="textcenter"> </span>
                            </el-col>
                            <el-col class="textcenter" :span="10">
                                <span class="textcenter">角色素質</span>
                            </el-col>
                            <el-col class="textcenter" :span="6" style="text-align: right;">
                                <el-tooltip class="item" effect="dark" content="讀取已經儲存的素質" placement="left">
                                    <el-button v-on:click="OpenStatusDBDialogDialogue" size="small">
                                        角色清單
                                    </el-button>
                                </el-tooltip>
                            </el-col>
                        </el-row>
                        <el-row>
                            <div class="boxborder StatusBlock">
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter">Level</el-col>
                                    <el-col>
                                        <el-input v-model.number="status.Level" v-on:input="onOption" placeholder="Level">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter">JobLevel</el-col>
                                    <el-col>
                                        <el-input v-model.number="status.JOBLevel" v-on:input="onOption" placeholder="Level">
                                        </el-input>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter" :span="3">STR</el-col>
                                    <el-col :span="10">
                                        <el-input v-model="status.STR" v-on:input="onOption"
                                            v-on:change="onStatusChange" placeholder="STR">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="1">+</el-col>
                                    <el-col class="textcenter" :span="4">{{status_add.STR}}</el-col>
                                    <el-col class="textcenter" :span="1">=</el-col>
                                    <el-col class="textcenter" :span="4">{{status_total.STR}}</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter" :span="3">AGI</el-col>
                                    <el-col :span="10">
                                        <el-input v-model="status.AGI" v-on:input="onOption"
                                            v-on:change="onStatusChange" placeholder="AGI">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="1">+</el-col>
                                    <el-col class="textcenter" :span="4">{{status_add.AGI}}</el-col>
                                    <el-col class="textcenter" :span="1">=</el-col>
                                    <el-col class="textcenter" :span="4">{{status_total.AGI}}</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter" :span="3">VIT</el-col>
                                    <el-col :span="10">
                                        <el-input v-model="status.VIT" v-on:input="onOption"
                                            v-on:change="onStatusChange" placeholder="VIT">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="1">+</el-col>
                                    <el-col class="textcenter" :span="4">{{status_add.VIT}}</el-col>
                                    <el-col class="textcenter" :span="1">=</el-col>
                                    <el-col class="textcenter" :span="4">{{status_total.VIT}}</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter" :span="3">INT</el-col>
                                    <el-col :span="10">
                                        <el-input v-model="status.INT" v-on:input="onOption"
                                            v-on:change="onStatusChange" placeholder="INT">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="1">+</el-col>
                                    <el-col class="textcenter" :span="4">{{status_add.INT}}</el-col>
                                    <el-col class="textcenter" :span="1">=</el-col>
                                    <el-col class="textcenter" :span="4">{{status_total.INT}}</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter" :span="3">DEX</el-col>
                                    <el-col :span="10">
                                        <el-input v-model="status.DEX" v-on:input="onOption"
                                            v-on:change="onStatusChange" placeholder="DEX">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="1">+</el-col>
                                    <el-col class="textcenter" :span="4">{{status_add.DEX}}</el-col>
                                    <el-col class="textcenter" :span="1">=</el-col>
                                    <el-col class="textcenter" :span="4">{{status_total.DEX}}</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" type="flex" align="middle"
                                    style="height:40px;">
                                    <el-col class="textcenter" :span="3">LUK</el-col>
                                    <el-col :span="10">
                                        <el-input v-model="status.LUK" v-on:input="onOption"
                                            v-on:change="onStatusChange" placeholder="LUK">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="1">+</el-col>
                                    <el-col class="textcenter" :span="4">{{status_add.LUK}}</el-col>
                                    <el-col class="textcenter" :span="1">=</el-col>
                                    <el-col class="textcenter" :span="4">{{status_total.LUK}}</el-col>
                                </el-row>
                            </div>
                        </el-row>
                        <el-row class="titlebox" type="flex" align="middle" justify="space-around" style="height:40px;">
                            <el-col class="textcenter" :span="10">
                                <span class="textcenter">敵方</span>
                            </el-col>
                        </el-row>
                        <el-row>
                            <div class="boxborder EnemyBlock">
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle"
                                    justify="center">
                                    <el-col :span="24">
                                        <div class="textcenter grid-content">
                                            <el-select value-key="id" v-model="enemyattribute"
                                                v-on:change="onSelectEnemy" placeholder="選擇敵方">
                                                <el-option v-for="item in enemylist" :key="item.id" :label="item.name"
                                                    :value="item">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col :span="3" class="textcenter"><span>屬性</span>
                                    </el-col>
                                    <el-col :span="5">
                                        <div class="grid-content bg-purple">
                                            <el-select v-model="enemyattribute.elemental"
                                                v-on:change="ComputElementalPercent" placeholder="敵方屬性">
                                                <el-option v-for="item in elementtypelist" :key="item.id"
                                                    :label="item.label" :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                    <el-col :span="4" class="textcenter"><span>屬性等級</span>
                                    </el-col>
                                    <el-col :span="3">
                                        <div class="grid-content bg-purple">
                                            <el-select value-key="id" v-model="enemyattribute.elementallevel"
                                                v-on:change="ComputElementalPercent" placeholder="屬性等級">
                                                <el-option v-for="item in elementlevel" :key="item.id" :label="item.id"
                                                    :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                    <el-col :span="4" class="textcenter">體型</el-col>
                                    <el-col :span="5">
                                        <div class="grid-content bg-purple">
                                            <el-select value-key="id" v-model="enemyattribute.size" placeholder="體型">
                                                <el-option v-for="item in sizetypelist" :key="item.id"
                                                    :label="item.label" :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                </el-row>

                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                        <el-tooltip class="item" effect="dark" content="(魔物等級+VIT)/2" placement="bottom-start">
                                    <el-col class="textcenter">前 DEF</el-col>
                                        </el-tooltip>
                                    <el-col>
                                        <el-input v-model="enemyattribute.StatusDEF" v-on:input="onChangeEnemyStatus"
                                            placeholder="前 DEF">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter">後 DEF</el-col>
                                    <el-col>
                                        <el-input v-model="enemyattribute.WeaponDEF" v-on:input="onChangeEnemyStatus"
                                            placeholder="後 DEF">
                                        </el-input>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                        <el-tooltip class="item" effect="dark" content="(魔物等級+INT)/4" placement="bottom-start">
                                    <el-col class="textcenter">前 MDEF</el-col>
                                        </el-tooltip>
                                    <el-col>
                                        <el-input v-model="enemyattribute.StatusMDEF" v-on:input="onChangeEnemyStatus"
                                            placeholder="前 MDEF">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter">後 MDEF</el-col>
                                    <el-col>
                                        <el-input v-model="enemyattribute.WeaponMDEF" v-on:input="onChangeEnemyStatus"
                                            placeholder="後 MDEF">
                                        </el-input>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-row>
                        <el-row class="titlebox" type="flex" align="middle" justify="space-around" style="height:40px;">
                            <el-col class="textcenter" :span="6">
                            </el-col>
                            <el-col class="textcenter" :span="10">
                                <span class="textcenter">技能</span>
                            </el-col>
                            <el-col class="textcenter" :span="6" style="text-align: right;">
                                <el-tooltip class="item" effect="dark" content="讀取已經儲存的技能" placement="left">
                                    <el-button v-on:click="TogglePanel('SkillDBDialog')" size="small">
                                        技能清單
                                    </el-button>
                                </el-tooltip>
                            </el-col>
                        </el-row>
                        <el-row>
                            <div class="boxborder OptionBlock">
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col class="textcenter" :span="12">技能倍率</el-col>
                                    <el-col class="textcenter" :span="8">
                                        {{option.SkillPercent}}
                                    </el-col>
                                    <el-col class="textcenter" :span="4">%</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col class="textcenter" :span="4">技能公式</el-col>
                                    <el-col :span="17">
                                        <el-input v-model="skill.formula" v-on:change="onSkillPercentChange"
                                            placeholder="Skill %">
                                        </el-input>
                                    </el-col>
                                    <el-col :span="2">
                                        <el-popover placement="right-start" title="公式關鍵字" width="350" trigger="click">
                                            <el-scrollbar wrap-class="DBlist-container" :native="false"
                                                :noresize="false">
                                                <el-table :data="KeywordReplaceList" stripe style="width: 100%">
                                                    <el-table-column prop="str1" label="關鍵字" width="100">
                                                    </el-table-column>
                                                    <el-table-column prop="description" label="功能" width="220">
                                                    </el-table-column>
                                                </el-table>
                                            </el-scrollbar>
                                            <el-button slot="reference">?</el-button>
                                        </el-popover>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col class="textcenter" :span="12">技能等級</el-col>
                                    <el-col class="textcenter" :span="4">
                                        <el-input v-model.number="skill.level" v-on:change="onSkillPercentChange"
                                            placeholder="技能等級">
                                        </el-input>
                                    </el-col>
                                </el-row>
                                <el-tooltip class="item" effect="dark" content="傷害次數, 負數時為分段傷害不會增加總傷害"
                                    placement="bottom-start">
                                    <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                        <el-col class="textcenter" :span="12">傷害次數</el-col>
                                        <el-col class="textcenter" :span="4">
                                            <el-input v-model.number="skill.hitnumber"
                                                v-on:change="onSkillPercentChange" placeholder="傷害次數">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                </el-tooltip>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>技能遠傷</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="skill.ranged" active-color="#13ce66"
                                            v-on:change="ComputeATKAtttibute" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>技能暴擊</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="skill.critical" active-color="#13ce66"
                                            v-on:change="ComputeATKAtttibute" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>使用加農砲彈</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="skill.cannon" active-color="#13ce66"
                                            v-on:change="onOption" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                <el-tooltip class="item" effect="dark" content="將乘算DEF(後DEF)改為減算DEF"
                                    placement="bottom-start">
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>半無視防禦</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="skill.transWeaponDEF" active-color="#13ce66"
                                            v-on:change="onOption" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                </el-tooltip>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>技能位置-後</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="skill.laterformula" active-color="#13ce66"
                                            v-on:change="onOption" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col class="textcenter" :span="12">
                                        <span>攻擊屬性</span>
                                    </el-col>
                                    <el-col :span="12">
                                        <div class="textcenter">
                                            <el-select value-key="id" v-model="skilloption.AttackElementalIdx"
                                                v-on:change="ComputElementalPercent" placeholder="攻擊屬性">
                                                <el-option v-for="item in elementtypelist" :key="item.id"
                                                    :label="item.label" :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col class="textcenter" :span="12">裝備技能傷害增加</el-col>
                                    <el-col :span="8">
                                        <el-input v-model.number="option.EquipSkillAddDamage" v-on:change="onOption"
                                            placeholder="Skill %">
                                        </el-input>
                                    </el-col>
                                    <el-col class="textcenter" :span="4">%</el-col>
                                </el-row>
                                <el-row class="statusbox bg-purple-light" :gutter="4" type="flex" align="middle">
                                    <el-col class="textcenter">武器修練ATK增加</el-col>
                                    <el-col>
                                        <el-input v-model.number="skilloption.WeaponMasteryATKInput" v-on:change="onOption"
                                            placeholder="ATK">
                                        </el-input>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-row>
                        <el-row>
                            <el-row class="titlebox" type="flex" align="middle" justify="space-around"
                                style="height:40px;">
                                <el-col class="textcenter" :span="6">
                                </el-col>
                                <el-col class="textcenter" :span="10">
                                    <span class="textcenter">額外技能選項</span>
                                </el-col>
                                <el-col class="textcenter" :span="6" style="text-align: right;">
                                    <el-button v-on:click="ResetOption" size="small">
                                        重置
                                    </el-button>
                                </el-col>
                            </el-row>
                            <el-row>
                                <div v-on:click="TogglePanel('SwordmanSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">劍士</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['SwordmanSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['SwordmanSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['SwordmanSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>騎乘</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Riding" v-on:change="ComputeSizefix"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>怒暴</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.MagnumBreak"
                                                    v-on:change="onOptionMagnumBreak" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>雙手劍攻擊速度增加</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.TwoHandQuicken" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>集中攻擊</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Concentration" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>靈氣劍</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.AuraBlade" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>狂怒之槍</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Berserk" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>盾咒(ATK)</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.ShieldSpell" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.ShieldSpell">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">盾牌防禦力</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.ShieldDEF"
                                                            v-on:change="onOption" placeholder="ShieldDEF">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                    </div>
                                </el-collapse-transition>

                                <div v-on:click="TogglePanel('ThiefSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">盜賊</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['ThiefSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['ThiefSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['ThiefSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>致命塗毒</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.EnchantDeadlyPoison"
                                                    v-on:change="onOptionEnchantDeadlyPoison" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>毒耐性弱化</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.VENOMIMPRESS" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.VENOMIMPRESS">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">毒耐性弱化</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.VENOMIMPRESSLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>高階拳刃修練</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.AdvancedKatarReserch" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('MerchantSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">商人</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['MerchantSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['MerchantSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['MerchantSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>大聲吶喊</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Loud" v-on:change="onOption" 
                                                 active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>武器值最大化</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.MaximizePower" v-on:change="ComputeSizefix"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>無視體型攻擊</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.WeaponPerfection"
                                                    v-on:change="ComputeSizefix" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>兇砍 25%</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Overthrust"
                                                    v-on:change="onOptionOverthrust('Self')" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>兇砍(隊伍) 15%</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.OverthrustParty"
                                                    v-on:change="onOptionOverthrust('Party')" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>兇砍最大值 100%</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.OverthrustMax"
                                                    v-on:change="onOptionOverthrust('Max')" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>速度激發</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.AdrenalineRush" active-color="#13ce66"
                                                    inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>火山塵暴</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Pyroclastic" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.Pyroclastic">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">生命體等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.HomunculusLevel"
                                                            v-on:change="onOption" placeholder="生命體等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <!-- <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>戰斧颶風</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.AxeTornado" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row> -->
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('ArcherSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">弓箭手</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['ArcherSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['ArcherSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['ArcherSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>狙殺瞄準</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.TrueSight" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>精英狙擊</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.UNLIMIT" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>操控樂器/練習舞蹈</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.MusicalDancingLesson" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('MageSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">魔法師</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['MageSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['MageSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['MageSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>魔法省悟</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.RECOGNIZEDSPELL" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>魔力增幅</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.MagicPower" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>打擊強化</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Striking" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.Striking">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">打擊強化等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.StrikingLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">屬性附加等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.EndowLevel_Total"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>魔力拳</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SPELLFIST" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.SPELLFIST">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">元素箭等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.ElementalBlotLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('AcolyteSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">服事</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['AcolyteSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['AcolyteSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['AcolyteSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>加速術</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.IncreaseAgility" v-on:change="onOptionIncreaseAgility('1st')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>天使的賜福</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Blessing" v-on:change="onOptionBlessing('1st')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>純白百合花</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.CANTOCANDIDUS" v-on:change="onOptionIncreaseAgility('3rd')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.CANTOCANDIDUS">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">施展者JOB等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.ABJobLevel"
                                                            v-on:change="onOption" placeholder="JOB等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>慈悲術</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.CREMENTIA" v-on:change="onOptionBlessing('3rd')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.CREMENTIA">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">施展者JOB等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.ABJobLevel"
                                                            v-on:change="onOption" placeholder="JOB等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>神威祈福</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.ImpositioManus" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.ImpositioManus">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">神威祈福等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.ImpositioManusLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>折枝讚頌</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.LAUDARAMUS" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.LAUDARAMUS">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">折枝讚頌等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.LAUDARAMUSLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>贖罪</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.EXPIATIO" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.EXPIATIO">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">贖罪等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.EXPIATIOLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>祈禱文</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.ORATIO" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.ORATIO">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">祈禱文等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.ORATIOLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>蓄氣</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SpiritSpheres" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.SpiritSpheres">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">氣球數量</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.SpiritSpheresCount"
                                                            v-on:change="onOption" placeholder="數量">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>點穴-反</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.GentleTouchCharge" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>

                                <div v-on:click="TogglePanel('TaekwonSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">跆拳</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['TaekwonSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['TaekwonSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['TaekwonSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>溫暖的風</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SevenWinde" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>加油</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.Kihop" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.Kihop">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">加油等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.KihopLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">隊伍人數(包含自己)</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.PartyMemberCount"
                                                            v-on:change="onOption" placeholder="人數">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('StarEmperorSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">拳聖 & 拳皇</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['StarEmperorSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['StarEmperorSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['StarEmperorSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>日月星的憎惡(怪物)</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SLSOpposition" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>日月星的奇蹟</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SLSMiracle" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>日月星的融合</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SLSFusion" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('SoulReaperSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">悟靈 & 獵靈</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['SoulReaperSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['SoulReaperSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['SoulReaperSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>靈魂蓄積</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SOULCOLLECT" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.SOULCOLLECT">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">靈魂數量</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.SoulCount"
                                                            v-on:change="onOption" placeholder="數量">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>影子靈魂</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SOULSHADOW" v-on:change="onSoulReaperSoul('SOULSHADOW')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>精靈靈魂</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SOULFAIRY" v-on:change="onSoulReaperSoul('SOULFAIRY')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>隼鷹靈魂</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SOULFALCON" v-on:change="onSoulReaperSoul('SOULFALCON')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>巨人靈魂</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.SOULGOLEM" v-on:change="onSoulReaperSoul('SOULGOLEM')"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('EquipSkillPage')">
                                    <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">裝備技能</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['EquipSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['EquipSkillPage']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['EquipSkillPage']">
                                        <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                            <el-col class="textcenter" :span="12">
                                                <span>奧汀之神力</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="12">
                                                <el-switch v-model="option.OdinsPower" v-on:change="onOption"
                                                    active-color="#13ce66" inactive-color="#8a9799">
                                                </el-switch>
                                            </el-col>
                                        </el-row>
                                        <el-collapse-transition>
                                            <div v-show="option.OdinsPower">
                                                <el-row class="optionsubbox" :gutter="4" type="flex" align="middle"
                                                    justify="center">
                                                    <el-col class="textcenter" :span="8">奧汀之神力等級</el-col>
                                                    <el-col :span="4">
                                                        <el-input v-model.number="option.OdinsPowerLevel"
                                                            v-on:change="onOption" placeholder="等級">
                                                        </el-input>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-collapse-transition>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>無視物理防禦(全段)</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="option.IgnoreDEF" v-on:change="onOption"
                                            active-color="#13ce66" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>無視魔法防禦(全段)</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="option.IgnoreMDEF" v-on:change="onOption"
                                            active-color="#13ce66" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                                <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col class="textcenter" :span="12">
                                        <span>魔劍士 達納托斯的記憶卡片</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-switch v-model="option.MemoryofThanatosCard" v-on:change="onOption"
                                            active-color="#13ce66" inactive-color="#8a9799">
                                        </el-switch>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-collapse-transition>
                        
                            <div v-on:click="TogglePanel('SpecialATKPage')">
                                <el-row class="subtitlebox" type="flex" align="middle" style="height:40px;">
                                    <el-col class="textcenter" :span="2">
                                    </el-col>
                                    <el-col class="textcenter" :span="20">
                                        <span class="textcenter">特殊ATK</span>
                                    </el-col>
                                    <el-col v-if="UIPanel['SpecialATKPage']" class="textcenter" :span="2">
                                        <i class="el-icon-arrow-down"></i>
                                    </el-col>
                                    <el-col v-else="UIPanel['SpecialATKPage']" class="textcenter" :span="2">
                                        <i class="el-icon-arrow-up"></i>
                                    </el-col>
                                </el-row>
                            </div>
                            <el-collapse-transition>
                                <div v-show="UIPanel['SpecialATKPage']">
                                    <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                        <el-col class="textcenter" :span="12">SpecialATK1(ATK+)</el-col>
                                        <el-col :span="12">
                                            <el-input v-model.number="computeattribute['SpecialATK1']"
                                                v-on:change="onSpecialATKChange" placeholder="ATK">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                    <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                        <el-col class="textcenter" :span="12">SpecialATK2(後ATK+)</el-col>
                                        <el-col :span="12">
                                            <el-input v-model.number="computeattribute['SpecialATK2']"
                                                v-on:change="onSpecialATKChange" placeholder="ATK">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                    <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                        <el-col class="textcenter" :span="12">SpecialATK3(屬性倍率x)</el-col>
                                        <el-col :span="12">
                                            <el-input v-model.number="computeattribute['SpecialATK3']"
                                                v-on:change="onSpecialATKChange" placeholder="ATK">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                    <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                        <el-col class="textcenter" :span="12">SpecialATK4(技能倍率x)</el-col>
                                        <el-col :span="12">
                                            <el-input v-model.number="computeattribute['SpecialATK4']"
                                                v-on:change="onSpecialATKChange" placeholder="ATK">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                    <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                        <el-col class="textcenter" :span="12">SpecialATK5(技能倍率+)</el-col>
                                        <el-col :span="12">
                                            <el-input v-model.number="computeattribute['SpecialATK5']"
                                                v-on:change="onSpecialATKChange" placeholder="ATK">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                    <el-row class="optionbox" :gutter="4" type="flex" align="middle" justify="end">
                                        <el-col class="textcenter" :span="12">SpecialATK6(DEF之後)</el-col>
                                        <el-col :span="12">
                                            <el-input v-model.number="computeattribute['SpecialATK6']"
                                                v-on:change="onSpecialATKChange" placeholder="ATK">
                                            </el-input>
                                        </el-col>
                                    </el-row>
                                </div>
                            </el-collapse-transition>
                        
                            </el-row>
                        </el-row>
                    </el-scrollbar>
                </el-col>
                <el-col :span="8">
                    <el-scrollbar wrap-class="bodycol-container" :native="true" :noresize="false">
                        <el-row class="titlebox" type="flex" align="middle" justify="space-around" style="height:40px;">
                            <el-col class="textcenter" :span="6"> </el-col>
                            <el-col class="textcenter" :span="10">
                                <span class="textcenter">裝備</span>
                            </el-col>
                            <el-col class="textcenter" :span="6" style="text-align: right;">
                                <el-tooltip class="item" effect="dark" content="讀取已經儲存的裝備" placement="left">
                                    <el-button v-on:click="TogglePanel('EquipDBDialog')" size="small">
                                        裝備清單
                                    </el-button>
                                </el-tooltip>
                            </el-col>
                        </el-row>
                        <el-row>
                            <div class="boxborder EquipBlock">
                                <div class="Item bg-purple-light" v-for="(item,eqindex) in equipspartlist">
                                    <div class="Equipment" style="padding: 0px 4px;">
                                        <el-row class="effectline" :gutter="4" type="flex" align="middle">
                                            <el-col class="textcenter" :span="4">
                                                <div>
                                                    <span>{{item.label}}</span>
                                                </div>
                                            </el-col>
                                            <el-col class="textcenter">
                                                <div>
                                                    <el-input v-model="equipspartlist[eqindex].equipname"
                                                        placeholder="裝備名稱">
                                                    </el-input>
                                                </div>
                                            </el-col>
                                            <el-col class="textcenter" :span="5">
                                                <el-button v-on:click="onClearEquipPart(eqindex)" size="mini">
                                                    清空
                                                </el-button>
                                            </el-col>
                                            <el-tooltip class="item" effect="dark" content="增加效果"
                                                placement="bottom-start">
                                                <el-col class="textcenter" :span="5">
                                                    <el-button v-on:click="OpenEffectDialogue(eqindex)"
                                                        icon="el-icon-circle-plus-outline" type="success" plain>
                                                    </el-button>
                                                </el-col>
                                            </el-tooltip>
                                            <el-col class="textcenter" :span="5">
                                                <el-tooltip class="item" effect="dark" content="儲存裝備"
                                                    placement="bottom-start">
                                                    <el-button v-on:click="onSaveEquip(eqindex)"
                                                        icon="el-icon-collection-tag">
                                                    </el-button>
                                                </el-tooltip>
                                            </el-col>
                                        </el-row>
                                        <el-row>
                                            <div v-for="(item, index) in equipspartlist[eqindex].effectlist"
                                                v-bind:key="item.effecttypelist">
                                                <el-row class="effectline" :gutter="4" type="flex" align="middle"
                                                    justify="end" style="height:40px;">
                                                    <el-col class="textcenter" :span="4">
                                                    </el-col>
                                                    <el-col class="textcenter" style="text-align: right;">
                                                        <span class="EffectType">{{ item.EffectType.label }}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="2">
                                                        <span class="">{{ item.EffectType.opersymbol }}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="3">
                                                        <span class="">{{ item.EffectNumber }}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="2">
                                                        <span lass="">{{ item.EffectType.suffixsymbol }}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="5">
                                                    </el-col>
                                                    <el-col class="textcenter" :span="15">
                                                        <el-button v-on:click="RemoveEffect(eqindex, index)"
                                                            icon="el-icon-delete" type="danger" size="mini">
                                                        </el-button>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-row>
                                    </div>
                                </div>
                            </div>
                        </el-row>
                        <el-row class="titlebox" type="flex" align="middle" justify="space-around" style="height:40px;">
                            <el-col class="textcenter" :span="10">
                                <span class="textcenter">武器</span>
                            </el-col>
                        </el-row>
                        <el-row>
                            <div class="boxborder WeaponBlock bg-purple-light">
                                <el-row :gutter="4" type="flex" align="middle">
                                    <el-col :span="4">
                                        <span>武器等級</span>
                                    </el-col>
                                    <el-col :span="8">
                                        <div class="grid-content bg-purple">
                                            <el-select value-key="id" v-model="weapon.level"
                                                v-on:change="onSelectedWeaponLevel" placeholder="武器等級">
                                                <el-option v-for="item in weaponlevellist" :key="item.id"
                                                    :label="item.label" :value="item">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                    <el-col :span="7">
                                        <span>精鍊等級</span>
                                    </el-col>
                                    <el-col :span="5">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.refinelevel"
                                                v-on:input="onChangeRefineLevel" placeholder="精鍊等級">
                                            </el-input>
                                        </div>
                                    </el-col>
                                </el-row>
                                <el-row class="effectline" :gutter="4" type="flex" align="middle" justify="end">
                                    <el-col :span="4">
                                        <span>主手武器</span>
                                    </el-col>
                                    <el-col :span="8">
                                        <div class="grid-content bg-purple">
                                            <el-select value-key="id" v-model="weapon.type"
                                                v-on:change="onSelectedWeaponType" placeholder="武器類型">
                                                <el-option v-for="item in weapontypelist" :key="item.id"
                                                    :label="item.label" :value="item">
                                                </el-option>
                                            </el-select>
                                        </div>
                                    </el-col>
                                    <el-col class="textcenter" :span="12">
                                        <el-checkbox v-model="lefthandweapon" label="副手持武" border></el-checkbox>
                                    </el-col>
                                </el-row>
                                <el-row class="effectline" :gutter="4" type="flex" align="middle">
                                    <el-col :span="6">
                                        <span>武器ATK: </span>
                                    </el-col>
                                    <el-col :span="6">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.ATK" placeholder="武器ATK">
                                            </el-input>
                                        </div>
                                    </el-col>
                                    <el-col :span="6">
                                        <span>武器MATK: </span>
                                    </el-col>
                                    <el-col :span="6">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.MATK" placeholder="武器MATK">
                                            </el-input>
                                        </div>
                                    </el-col>
                                </el-row>
                                <el-row class="effectline" :gutter="4" type="flex" align="middle">
                                    <el-col :span="6">
                                        <span>箭矢ATK: </span>
                                    </el-col>
                                    <el-col :span="6">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.ArrowATK" placeholder="箭矢ATK">
                                            </el-input>
                                        </div>
                                    </el-col>
                                    <el-col :span="6">
                                        <span>砲彈ATK: </span>
                                    </el-col>
                                    <el-col :span="6">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.BulletATK" placeholder="砲彈ATK">
                                            </el-input>
                                        </div>
                                    </el-col>
                                </el-row>
                                <el-row class="effectline" :gutter="4" type="flex" align="middle">
                                    <el-col :span="6">
                                        <span>武器重量: </span>
                                    </el-col>
                                    <el-col :span="6">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.Weight" placeholder="WGT">
                                            </el-input>
                                        </div>
                                    </el-col>
                                    <el-col :span="6">
                                        <span>盾牌重量: </span>
                                    </el-col>
                                    <el-col :span="6">
                                        <div class="grid-content bg-purple-light">
                                            <el-input v-model.number="weapon.ShieldWeight" placeholder="SHWGT">
                                            </el-input>
                                        </div>
                                    </el-col>
                                </el-row>
                                <el-row class="bg-purple effectline" type="flex" align="middle" justify="center">
                                    <el-col class="textcenter" :span="8" style="text-align: right;">
                                        <span>精鍊Atk/Matk:</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="4">
                                        <span>{{weapon.refineatk}}</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="8" style="text-align: right;">
                                        <span>過度精鍊Atk/Matk:</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="4">
                                        <span>{{weapon.refineatk2}}</span>
                                    </el-col>
                                </el-row>
                                <el-row class="bg-purple effectline" type="flex" align="middle" justify="center">
                                    <el-col class="textcenter" :span="8" style="text-align: right;">
                                        <span>體型修正:</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="16">
                                        <span>{{weapon.sizefix}}</span>
                                    </el-col>
                                </el-row>
                                <el-row class="bg-purple effectline" type="flex" align="middle" justify="center">
                                    <el-col class="textcenter" :span="8" style="text-align: right;">
                                        <span>普攻遠程:</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="16">
                                        <span>{{weapon.type.isRangedattack}}</span>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-row>
                        <el-row class="titlebox" type="flex" align="middle" justify="space-around" style="height:40px;">
                            <el-col class="textcenter" :span="10">
                                <span class="textcenter">裝備效果整合</span>
                            </el-col>
                        </el-row>
                        <el-row>
                            <div class="boxborder EffectListBlock">
                                <el-row>
                                    <el-col :span="24">
                                        <el-row>
                                            <div v-for="(item, id) in this.effecttypelist" v-bind:key="item.id">

                                                <el-row v-if="item.totalvalue!=0" class="statusbox bg-purple"
                                                    type="flex" align="middle" justify="center" style="height:40px;">
                                                    <el-col class="textcenter" :span="6" style="text-align: right;">
                                                        <span>{{ item.label }}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="2">
                                                        <span class="">{{ item.opersymbol }}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="2">
                                                        <span>{{item.totalvalue}}</span>
                                                    </el-col>
                                                    <el-col class="textcenter" :span="2 ">
                                                        <span lass="">{{ item.suffixsymbol }}</span>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-row>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-row>
                    </el-scrollbar>
                </el-col>
                <el-col :span="8">
                    <el-scrollbar wrap-class="bodycol-container" :native="true" :noresize="false">
                        <el-row>
                            <div class="Attribute">
                                <div v-on:click="TogglePanel('General')">
                                    <el-row class="titlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">一般</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['General']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['General']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['General']">
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>素質Atk(前):</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube.StatusATK}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>素質Matk(前):</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube.StatusMATK}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>屬性相剋倍率:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{skilloption.ElementalPercent}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>體型修正倍率:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.sizefix}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>敵方物理防禦係數:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.enemydef}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>敵方魔法防禦係數:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.enemymdef}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>暴擊率:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube['CRI']}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>暴擊增傷:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube['CRIDP']}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>攻擊後延遲:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube['ASPDP']}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>變動詠唱:</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube['VCT']}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>忽略物理防禦(乘算):</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube['BYPASSDEF']}} %</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>忽略魔法防禦(乘算):</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{attritube['BYPASSMDEF']}} %</span>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <div v-on:click="TogglePanel('ATKCompute')">
                                    <el-row class="titlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">ATK計算</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['ATKCompute']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['ATKCompute']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['ATKCompute']">
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>基礎ATK:</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc0_min}}~{{computeattribute.atkc0_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>精練&特殊ATK加值</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc1_min}}~{{computeattribute.atkc1_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>體型修正&箭矢傷害</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc2_min}}~{{computeattribute.atkc2_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>總武器ATK</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.weaponatk_min}}~{{computeattribute.weaponatk_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>種族階級體型屬性</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkequip_min}}~{{computeattribute.atkequip_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>ATK%</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkbranch_min}}~{{computeattribute.atkbranch_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>後ATK(上面兩個和)</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc4_min}}~{{computeattribute.atkc4_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>最終ATK</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc5_min}}~{{computeattribute.atkc5_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>暴傷遠傷%</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc6_min}}~{{computeattribute.atkc6_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>技能倍率&敵方DEF</span>
                                            </el-col>
                                            <el-col  class="textcenter" :span="10">
                                                <span>{{computeattribute.atkc7_min}}~{{computeattribute.atkc7_max}}</span>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>技能傷害</span>
                                    </el-col>
                                    <el-col  class="textcenter" :span="10">
                                        <span>{{computeattribute.atkc8_min}}~{{computeattribute.atkc8_max}}</span>
                                    </el-col>
                                </el-row>
                                <el-row v-if="skill.hitnumber>1||skill.hitnumber<0" class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>技能總傷害</span>
                                    </el-col>
                                    <el-col  class="textcenter" :span="10">
                                        <span>{{this.computeattribute.atkmulti_min}}~{{computeattribute.atkmulti_max}}</span>
                                    </el-col>
                                </el-row>
                                <el-row v-if="skill.critical" class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>技能傷害(暴擊)</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="10">
                                        <span>{{computeattribute.atkskillcritical}}</span>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>普攻傷害</span>
                                    </el-col>
                                    <el-col  class="textcenter" :span="10">
                                        <span>{{computeattribute.normalattack_min}}~{{computeattribute.normalattack_max}}</span>
                                    </el-col>
                                </el-row>
                                <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>普攻傷害(暴擊)</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="10">
                                        <span>{{computeattribute.normalcritical}}</span>
                                    </el-col>
                                </el-row>
                                <div v-on:click="TogglePanel('MATKCompute')">
                                    <el-row class="titlebox" type="flex" align="middle" style="height:40px;">
                                        <el-col class="textcenter" :span="2">
                                        </el-col>
                                        <el-col class="textcenter" :span="20">
                                            <span class="textcenter">MATK計算</span>
                                        </el-col>
                                        <el-col v-if="UIPanel['MATKCompute']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-down"></i>
                                        </el-col>
                                        <el-col v-else="UIPanel['MATKCompute']" class="textcenter" :span="2">
                                            <i class="el-icon-arrow-up"></i>
                                        </el-col>
                                    </el-row>
                                </div>
                                <el-collapse-transition>
                                    <div v-show="UIPanel['MATKCompute']">
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>武器MATK</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.weaponmatk_min}}~{{computeattribute.weaponmatk_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>裝備MATK&魔力增幅</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.equipmatk_min}}~{{computeattribute.equipmatk_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>MATK%</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.matkpercent_min}}~{{computeattribute.matkpercent_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>最終MATK</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.finalmatk_min}}~{{computeattribute.finalmatk_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>敵方減傷</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.matk1_min}}~{{computeattribute.matk1_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>技能倍率</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.skillmatk_min}}~{{computeattribute.skillmatk_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>敵方MDEF</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.matk2_min}}~{{computeattribute.matk2_max}}</span>
                                            </el-col>
                                        </el-row>
                                        <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                            style="height:40px;">
                                            <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                                <span>技能增傷</span>
                                            </el-col>
                                            <el-col class="textcenter" :span="10">
                                                <span>{{computeattribute.matk3_min}}~{{computeattribute.matk3_max}}</span>
                                            </el-col>
                                        </el-row>
                                    </div>
                                </el-collapse-transition>
                                <el-row class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>技能傷害</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="10">
                                        <span>{{computeattribute.matk4_min}}~{{computeattribute.matk4_max}}</span>
                                    </el-col>
                                </el-row>
                                <el-row v-if="skill.hitnumber>1||skill.hitnumber<0" class="statusbox" type="flex" align="middle" justify="space-around"
                                    style="height:40px;">
                                    <el-col class="bg-purple-light" :span="10" style="text-align: right;">
                                        <span>技能總傷害</span>
                                    </el-col>
                                    <el-col class="textcenter" :span="10">
                                        <span>{{computeattribute.matkmulti_min}}~{{computeattribute.matkmulti_max}}</span>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-row>
                    </el-scrollbar>
                </el-col>
            </el-row>

        </div>
        <!-- footer -->
        <div class="ROCalFooter">
            <div type="flex" align="middle" justify="center">
                Copyright(c) Landgris</br>
                <a href="https://twitter.com/Landgris" target="_blank"><span>Twitter</span></a>
            </div>
        </div>
    </div>



    <script>
        evue = new Vue({
            el: '#App',
            data: {
                StoreDB_Skill: [],
                StoreDB_Status: [],
                StatusName: '',
                StatusBulidString: '',

                StoreDB_EquipFliterGroup: [],
                StoreDB_Equip: [],
                EquipSelectId: '',
                EquipSelectLabel: '',

                StoreDB_QuickCalc: [],
                QuickCalc: { formula: '', solution: '', remark: '' },

                SpecialthanksList: [],

                equipspartlist: [
                    { id: 'helm', label: '頭飾', equipname: '', effectlist: [] },
                    { id: 'helm1', label: '頭中', equipname: '', effectlist: [] },
                    { id: 'helm2', label: '頭下', equipname: '', effectlist: [] },
                    { id: 'armor', label: '衣服', equipname: '', effectlist: [] },
                    { id: 'weaponr', label: '主手', equipname: '', effectlist: [] },
                    { id: 'weaponl', label: '副手', equipname: '', effectlist: [] },
                    { id: 'robe', label: '披肩', equipname: '', effectlist: [] },
                    { id: 'shoes', label: '靴子', equipname: '', effectlist: [] },
                    { id: 'acc1', label: '飾品', equipname: '', effectlist: [] },
                    { id: 'acc2', label: '飾品', equipname: '', effectlist: [] },
                    { id: 'shadow', label: '影子', equipname: '', effectlist: [] },
                    { id: 'costume', label: '服飾', equipname: '', effectlist: [] },
                    { id: 'cardset', label: '套卡', equipname: '', effectlist: [] },
                    { id: 'other', label: '自訂', equipname: '', effectlist: [] },
                ],
                effecttypelist: [
                    { label: 'STR', id: 'STR', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'AGI', id: 'AGI', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'VIT', id: 'VIT', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'INT', id: 'INT', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'DEX', id: 'DEX', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'LUK', id: 'LUK', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: '全能力', id: 'AllStatus', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },

                    { label: 'Atk', id: 'Atk', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'Atk %', id: 'AtkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '物理種族 %', id: 'RaceAtkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '物理體型 %', id: 'SizeAtkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '對屬性魔物Atk %', id: 'ElementalAtkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '物理階級 %', id: 'LevelAtkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '暴傷 %', id: 'CriDamagePercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '遠傷 %', id: 'RangedDamagePercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '無視物理防禦 %', id: 'BypassDEFPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },

                    { label: 'Matk', id: 'Matk', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: 'Matk %', id: 'MatkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '魔法種族 %', id: 'RaceMatkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '魔法體型 %', id: 'SizeMatkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '魔法階級 %', id: 'LevelMatkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '對屬性魔物Matk %', id: 'ElementalMatkPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '屬性魔法 %', id: 'ElementalMagicPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '無視魔法防禦 %', id: 'BypassMDEFPercent', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },

                    { label: 'ASPD', id: 'ASPD', totalvalue: '', opersymbol: '\+', suffixsymbol: '' },
                    { label: '攻擊後延%', id: 'AspdPercent', totalvalue: '', opersymbol: '\-', suffixsymbol: '\%' },
                    { label: '暴擊率 %', id: 'Cri', totalvalue: '', opersymbol: '\+', suffixsymbol: '\%' },
                    { label: '技能後延%', id: 'GCDPercent', totalvalue: '', opersymbol: '\-', suffixsymbol: '\%' },
                    { label: '變詠 %', id: 'VariableCastPercent', totalvalue: '', opersymbol: '\-', suffixsymbol: '\%' },
                    { label: '固詠', id: 'FixedCast', totalvalue: '', opersymbol: '\-', suffixsymbol: 's' },
                    { label: '固詠 %', id: 'FixedCastPercent', totalvalue: '', opersymbol: '\-', suffixsymbol: '\%' },
                ],
                effectdialogue: {
                    EffectType: '',
                    EffectNumber: ''
                },
                weapontypelist: [
                    { id: 'Daggers', label: '短劍', sizefix: { small: 100, middle: 75, big: 50 }, baseaspd: '', isRangedattack: false },
                    { id: 'OneHandedSwords', label: '單手劍', sizefix: { small: 75, middle: 100, big: 75 }, baseaspd: '', isRangedattack: false },
                    { id: 'TwoHandedSword', label: '雙手劍', sizefix: { small: 75, middle: 75, big: 100 }, baseaspd: '', isRangedattack: false },
                    { id: 'Katars', label: '拳刃', sizefix: { small: 75, middle: 100, big: 75 }, baseaspd: '', isRangedattack: false },
                    { id: 'Spears', label: '矛類', sizefix: { small: 75, middle: 75, big: 100 }, baseaspd: '', isRangedattack: false },
                    { id: 'Axes', label: '斧類', sizefix: { small: 50, middle: 75, big: 100 }, baseaspd: '', isRangedattack: false },
                    { id: 'Maces', label: '鈍器', sizefix: { small: 75, middle: 100, big: 100 }, baseaspd: '', isRangedattack: false },
                    { id: 'Knuckles', label: '拳套', sizefix: { small: 100, middle: 100, big: 75 }, baseaspd: '', isRangedattack: false },
                    { id: 'Rods', label: '杖類', sizefix: { small: 100, middle: 100, big: 100 }, baseaspd: '', isRangedattack: false },
                    { id: 'Books', label: '書本', sizefix: { small: 100, middle: 100, big: 50 }, baseaspd: '', isRangedattack: false },
                    { id: 'Bows', label: '弓', sizefix: { small: 100, middle: 100, big: 75 }, baseaspd: '', isRangedattack: true },
                    { id: 'Instruments', label: '樂器', sizefix: { small: 75, middle: 100, big: 75 }, baseaspd: '', isRangedattack: false },
                    { id: 'Whips', label: '鞭子', sizefix: { small: 75, middle: 100, big: 75 }, baseaspd: '', isRangedattack: false },
                    { id: 'Guns', label: '槍', sizefix: { small: 100, middle: 100, big: 100 }, baseaspd: '', isRangedattack: true },
                    { id: 'Shuriken', label: '手裏劍', sizefix: { small: 75, middle: 75, big: 100 }, baseaspd: '', isRangedattack: false },
                ],
                lefthandweapon: false,
                weaponlevellist: [
                    { id: 1, label: '一級武器', upgradeatk: 2, saferefine: 7, overatk: 3 },
                    { id: 2, label: '二級武器', upgradeatk: 3, saferefine: 6, overatk: 5 },
                    { id: 3, label: '三級武器', upgradeatk: 5, saferefine: 5, overatk: 8 },
                    { id: 4, label: '四級武器', upgradeatk: 7, saferefine: 4, overatk: 14 }
                ],
                weapon: {
                    type: '', sizefix: '', level: '',
                    ATK: 0, MATK: 0, ArrowATK: 0, BulletATK: 0,
                    refinelevel: 0, refineatk: 0, refineatk2: 0,
                    Weight: 0, ShieldWeight: 0,
                },
                status: {
                    Level: 1, JOBLevel: 1,
                    STR: 0, AGI: 0, VIT: 0, INT: 0, DEX: 0, LUK: 0
                },
                status_add: {
                    STR: 0, AGI: 0, VIT: 0, INT: 0, DEX: 0, LUK: 0,
                },
                status_add_init: {},
                status_total: {
                    STR: 0, AGI: 0, VIT: 0, INT: 0, DEX: 0, LUK: 0,
                },
                status_total_init: {},
                attritube: {
                    StatusATK: 0, WeaponATK: 0, StatusMATK: 0, WeaponMATK: 0,
                    ATK: 0, MATK: 0, ATKP: 0, MATKP: 0, DEF: 0, MDEF: 0,
                    ASPD: 0, ASPDP: 0, CRI: 0, VCT: 0, FCT: 0, HIT: 0,
                    CRIDP: 0, RNGDP: 0, BYPASSDEF: 0, BYPASSMDEF: 0,
                },
                attritube_init: {},
                sizetypelist: [
                    { id: 0, label: '小型' },
                    { id: 1, label: '中型' },
                    { id: 2, label: '大型' },
                ],
                elementtypelist: [
                    { id: 0, label: '無' },
                    { id: 1, label: '火' },
                    { id: 2, label: '水' },
                    { id: 3, label: '風' },
                    { id: 4, label: '地' },
                    { id: 5, label: '毒' },
                    { id: 6, label: '聖' },
                    { id: 7, label: '暗' },
                    { id: 8, label: '念' },
                    { id: 9, label: '不死' }
                ],
                elementlevel: [{ id: 1 }, { id: 2 }, { id: 3 }, { id: 4 }],
                elementalmap: [
                    100, 100, 100, 100, 100, 100, 100, 100, 70, 100,
                    100, 25, 90, 100, 150, 100, 75, 100, 100, 125,
                    100, 150, 25, 90, 100, 100, 75, 100, 100, 100,
                    100, 100, 175, 25, 90, 100, 75, 100, 100, 100,
                    100, 90, 100, 150, 25, 100, 75, 100, 100, 100,
                    100, 125, 100, 125, 125, 0, 75, 50, 100, -25,
                    100, 100, 100, 100, 100, 100, 0, 125, 100, 150,
                    100, 100, 100, 100, 100, 50, 125, 0, 100, -25,
                    70, 100, 100, 100, 100, 100, 75, 75, 125, 100,
                    100, 100, 100, 100, 100, 50, 100, 0, 100, 0,
                    100, 100, 100, 100, 100, 100, 100, 100, 50, 100,
                    100, 0, 80, 100, 175, 100, 50, 75, 100, 150,
                    100, 175, 0, 80, 100, 100, 50, 75, 100, 100,
                    100, 100, 175, 0, 80, 100, 50, 75, 100, 100,
                    100, 80, 100, 175, 0, 100, 50, 75, 100, 100,
                    100, 125, 75, 125, 125, 0, 50, 25, 75, -50,
                    100, 100, 100, 100, 100, 100, -25, 150, 100, 175,
                    100, 100, 100, 100, 100, 25, 150, -25, 100, -50,
                    50, 75, 75, 75, 75, 75, 50, 50, 150, 125,
                    100, 75, 75, 75, 75, 25, 125, 0, 100, 0,
                    100, 100, 100, 100, 100, 100, 100, 100, 0, 100,
                    100, -25, 70, 100, 200, 100, 25, 50, 100, 175,
                    100, 200, -25, 70, 100, 100, 25, 50, 100, 125,
                    100, 100, 200, -25, 70, 100, 25, 50, 100, 100,
                    100, 70, 100, 200, -25, 100, 25, 50, 100, 75,
                    100, 100, 50, 100, 100, 0, 25, 0, 50, -75,
                    100, 100, 100, 100, 100, 125, -50, 175, 100, 200,
                    100, 100, 100, 100, 100, 0, 175, -50, 100, -75,
                    0, 50, 50, 50, 50, 50, 25, 25, 175, 150,
                    100, 50, 50, 50, 50, 0, 150, 0, 100, 0,
                    100, 100, 100, 100, 100, 100, 100, 100, 0, 100,
                    100, -50, 60, 100, 200, 75, 0, 25, 100, 200,
                    100, 200, -50, 60, 100, 75, 0, 25, 100, 150,
                    100, 100, 200, -50, 60, 75, 0, 25, 100, 100,
                    100, 60, 100, 200, -50, 75, 0, 25, 100, 50,
                    100, 75, 25, 75, 75, 0, 0, -25, 25, -100,
                    100, 75, 75, 75, 75, 125, -100, 200, 100, 200,
                    100, 75, 75, 75, 75, -25, 200, -100, 100, -100,
                    0, 25, 25, 25, 25, 25, 0, 0, 200, 175,
                    100, 25, 25, 25, 25, -25, 175, 0, 100, 0
                ],
                enemyattribute: {
                    name: '',
                    level: 0, hp: 0, VIT: 0, INT: 0,
                    elemental: 0, elementallevel: 1, size: '',
                    StatusDEF: 0, WeaponDEF: 0,
                    StatusMDEF: 0, WeaponMDEF: 0,
                    sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0,
                    rangedResist: 0, raceResist: 0, criResist: 0,
                    doram: false,
                },
                enemylist: [],
                KeywordReplaceList: [],
                skill: {
                    name: '',
                    level: 0,
                    formula: '',
                    ranged: false,
                    critical: false,
                    cannon: false,
                    transWeaponDEF: false,
                    laterformula: false,
                    hitnumber: 1,
                    elemental: 0,
                },
                skilloption: {
                    AttackElementalIdx: 0,      //玩家攻擊屬性
                    ElementalPercent: 0,        //屬性倍率
                    WeaponMasteryATKInput: 0,
                    WeaponMasteryATK: 0,        //武器修練
                },
                option_init: '',
                option:
                {

                    Loud: false,                //大聲吶喊
                    MaximizePower: false,       //武器值最大化
                    WeaponPerfection: false,    //無視體型攻擊
                    Overthrust: false,          //兇砍
                    OverthrustParty: false,     //兇砍隊伍
                    OverthrustMax: false,       //兇砍最大值
                    AdrenalineRush: false,      //速度激發
                    AxeTornado: false,          //戰斧颶風
                    Pyroclastic: false,         //火山塵暴
                    HomunculusLevel: 1,         //生命體等級

                    Riding: false,              //騎乘
                    TwoHandQuicken: false,      //雙劍加速
                    Concentration: false,       //集中攻擊
                    AuraBlade: false,           //靈氣劍 等級*10
                    AuraBladeValue: 8,
                    Berserk: false,             //狂怒之槍
                    ShieldSpell: false,         //盾咒
                    ShieldDEF: 0,

                    MagnumBreak: false,             //怒暴
                    MagnumBreakValue: 20,
                    EnchantDeadlyPoison: false,     //致命塗毒
                    EnchantDeadlyPoisonValue: 25,
                    EnchantDeadlyPoisonPercent: 300,
                    MagnumPoison2Value: 0,          //怒暴致毒

                    VENOMIMPRESS: false,            //毒耐性弱化
                    VENOMIMPRESSLevel: 0,
                    AdvancedKatarReserch: false,    //高階拳刃修練
                    AdvancedKatarReserchValue: 20,

                    RECOGNIZEDSPELL: false,         //魔法省悟
                    MagicPower: false,              //魔力增幅
                    MagicPowerValue: 50,
                    Striking: false,                //打擊強化
                    StrikingLevel: 1,               
                    EndowLevel_Total: 0,            //屬附總等級
                    SPELLFIST: false,               //魔力拳
                    ElementalBlotLevel: 1,


                    IncreaseAgility: false,     //加速
                    IncreaseAgilityValue: 10,
                    Blessing: false,            //天賜
                    CREMENTIA: false,           //慈悲
                    CANTOCANDIDUS: false,       //純白百合花
                    ABJobLevel: 1,              //施展者JOB等級
                    SpiritSpheres: false,       //蓄氣
                    SpiritSpheresCount: 0,      
                    GentleTouchCharge: false,   //點穴-反
                    ImpositioManus: false,      //神威祈福
                    ImpositioManusLevel: 0,
                    LAUDARAMUS: false,          //折枝讚頌
                    LAUDARAMUSLevel: 0,
                    EXPIATIO: false,            //贖罪
                    EXPIATIOLevel: 0,
                    ORATIO: false,              //祈禱文
                    ORATIOLevel: 0,

                    TrueSight: false,               //狙殺瞄準  命中率 +30%, 傷害力 +20%, 必殺攻擊率+10
                    TrueSightValue: 20,
                    UNLIMIT: false,                 //精英狙擊
                    UNLIMITLevel: 5,
                    MusicalDancingLesson: false,    // 操控樂器練習舞蹈

                    SevenWinde: false,          //溫暖的風
                    Kihop: false,               //加油
                    KihopLevel: 5,
                    PartyMemberCount: 0,
                    SLSOpposition: false,           //太陽和月亮和星星的憎惡
                    SLSMiracle: false,              //太陽和月亮和星星的奇蹟
                    SLSFusion: false,               //太陽和月亮和星星的融合

                    SOULCOLLECT: false,         //靈魂蓄積
                    SoulCount: 0,               
                    SOULSHADOW: false,          //影子靈魂
                    SOULFAIRY: false,           //精靈靈魂
                    SOULFALCON: false,          //隼鷹靈魂
                    SOULGOLEM: false,           //巨人靈魂


                    //TODO[戰斧颶風]的風屬性武器增傷125%
                    SkillPercent: 0,
                    SkillFormulaError: '',

                    EquipSkillAddDamage: 0,         //裝備技能增傷
                    BaseCriticalValue: 40,          //基礎暴擊增傷

                    OdinsPower: false,           //奧汀之神力
                    OdinsPowerLevel: 0,

                    IgnoreDEF: false,
                    IgnoreMDEF: false,
                    MemoryofThanatosCard: false,
                },
                computeattribute:
                {
                    elementalpercent: 0,
                    sizefix: 0,
                    enemydef: 0,
                    enemymdef: 0,

                    SpecialATK1: 0, // 特殊技能加值  體型修正之前 打擊強化、點穴(半)、祈禱文 
                    SpecialATK2: 0, // 特殊加值  種族體型屬性階級+ATK%分支(後ATK)+SpecialATK2   舞蹈練習 砲彈
                    SpecialATK3: 0, // 特殊屬性乘值  ATK%分支 屬性倍率之後 素質ATK之前  要分開乘 但 毒弱 紋章 通常只會有一種
                    // 技能倍率*SpecialATK4+SpecialATK5
                    SpecialATK4: 0, // 特殊技能乘值  技能倍率後 DEF之前  戰斧風屬性倍率 
                    SpecialATK5: 0, // 特殊技能加值  技能倍率後 DEF之前  凶砍 狙殺 狂怒之槍
                    SpecialATK6: 0, // 特殊技能加值  DEF之後 靈氣劍

                    atkc0_min: 0,   //武器基礎ATK x [ 1 + ( STR ÷ 200 ) - ( 武器等級 x 0.05 ) 
                    atkc0_max: 0,   //武器基礎ATK x [ 1 + ( STR ÷ 200 ) + ( 武器等級 x 0.05 ) 

                    atkc1_min: 0,   // atkc0 + 精煉ATK  + SpecialATK1 )
                    atkc1_max: 0,

                    atkc2_min: 0,   //(atkc1 x 體形修正 + 箭矢ATK)
                    atkc2_max: 0,

                    weaponatk_min: 0,
                    weaponatk_max: 0,
                    //(atkc2 x ( 1 + 怒暴20％ 或  致命塗毒25%(二選一)  x  屬性表 ) + 卡裝ATK))

                    atkequip_min: 0,
                    atkequip_max: 0,
                    //weaponatk_min x ( 1 + 種族ATK% ) x ( 1 + 體型ATK% ) x (1 + 屬性ATK% ) x ( 1 + 階級ATK% ) x ( 1 + 致命塗毒 )

                    atkbranch_min: 0,
                    atkbranch_max: 0,
                    //weaponatk_min x (霸氣ATK% + ATK% )
                    //x 對方( 1 - 體型減傷% ) x ( 1 - 階級減傷% ) x ( 1 - 攻擊屬性減傷% ) x ( 1 - 怪物屬性減傷% )
                    //+ 砲彈ATK

                    atkc4_min: 0,
                    atkc4_max: 0,
                    //weaponatk_min + atkbranch_min

                    atkc5_min: 0,
                    atkc5_max: 0,
                    //atkc4_max x 屬性倍率 x (1 + SpecialATK3) x (使用左手武器時 1 - 25%)
                    // + 素質ATK x 2+ 修煉ATK + 武器強悍

                    atkc6_min: 0,
                    atkc6_max: 0,
                    atkskillcritical: 0,  //技能暴擊 
                    //x 本身 ( 1 + 遠距增傷% ) x ( 1 +暴擊增傷卡裝% )
                    //x 對方為喵族 ( 1 + 10% )x 對方 ( 1 -  遠距減傷% ) x ( 1 - 種族減傷%) x ( 1 - 暴擊減傷%)

                    atkc7_min: 0,
                    atkc7_max: 0,
                    //x 本身( 技能倍率% x [戰斧颶風]的風屬性武器增傷125% + SpecialATK5)
                    //x ( 高階拳刃修練等級 x 2% + 10%)
                    //x 對方 ( ( 4000 + 後DEF ) ÷ ( 4000 + 10 x 後DEF ) ) - 前DEF

                    normalattack_min: 0,
                    normalattack_max: 0,
                    normalcritical: 0,

                    atkc8_min: 0,// x ( 1 + 技能增傷的卡裝%) x ( 1 + 技能增傷的技能% )
                    atkc8_max: 0,

                    atkc9_min: 0,// x ( 1 + 技能增傷的卡裝%) x ( 1 + 技能增傷的技能% )
                    atkc9_max: 0,

                    atkmulti_min: 0,
                    atkmulti_max: 0,
                    /*
                    x ( 致命爪痕 1 + 250% (限定近距離物理攻擊))
                    x ( 天使之怒或天罰(效果不累加) 1 + 100% )
                    x ( 二刀連擊 1 + 100% )
                    x ( 潛擊 1 + 30%(BOSS型怪為15%) )
                    x (右手修練等級 x 10% + 50% 或 左手修練等級 x 10% + 30%)
                    x 對方(1 + 抵抗魔法等級 x 20% )
                    x 對方(1 - 鋼筋鐵骨等級 x 20% )
                    x 對方(1 - 金剛不壞 90% )
                    x 對方(1 - 俯身 90% )
                    */

                    weaponmatk_min: 0,  // statusmatk + (( 武器MATK + 精煉MATK ) x ( 1 -  武器等級 x 0.10 ))
                    weaponmatk_max: 0,  // statusmatk + (( 武器MATK + 精煉MATK ) x ( 1 +  武器等級 x 0.10 ))
                    equipmatk_min: 0,   // weaponmatk_min x (1 + 0.05 × 魔力增幅等級 ) + 卡裝MATK )
                    equipmatk_max: 0,
                    matkpercent_min: 0, // equipmatk_min x 本身( 1 + MATK增傷%)
                    matkpercent_max: 0,
                    finalmatk_min: 0,   // x ( 1 + 我方屬性增傷%) x ( 1 + 對方屬性增傷%) x ( 1+ 種族增傷%) x (1 + 體型增傷%)
                    finalmatk_max: 0,
                    matk1_min: 0,  // 對方為喵族 ( 1 + 10% ) x 對方(1 -  體型減傷%) x ( 1-  屬性減傷%) x ( 1 - 種族減傷%) x ( 1 -  階級減傷% )
                    matk1_max: 0,
                    skillmatk_min: 0,   //x 本身(技能倍率%)
                    skillmatk_max: 0,
                    matk2_min: 0,      //x 對方(1000+後MDEF) / (1000+10 x 後MDEF) - 前MDEF)
                    matk2_max: 0,
                    matk3_min: 0,       // x (1 + 技能增傷的卡裝%)  x (1 + 技能增傷的技能%)
                    matk3_max: 0,
                    matk4_min: 0,       // x 屬性倍率
                    matk4_max: 0,
                    matkmulti_min: 0,
                    matkmulti_max: 0,

                    /*
                    魔法最終傷害公式=
                    ((( INT + INT/2 + LUK/3 + BaseLv/4 + DEX/5 )
                    + (( 武器MATK + 精煉MATK ) x ( 1 ±  武器等級 x 0.10 ))
                    x (1 + 0.05 × 魔力增幅等級 ) + 卡裝MATK )
                    x 本身( 1 + MATK增傷%) x ( 1 + 我方屬性增傷%) x ( 1 + 對方屬性增傷%) x ( 1+ 種族增傷%) x (1 + 體型增傷%)
                    x 對方為喵族 ( 1 + 10% )
                    x 對方(1 -  體型減傷%) x ( 1-  屬性減傷%) x ( 1 - 種族減傷%) x ( 1 -  階級減傷% )
                    x 本身(技能倍率%)
                    x 對方(1000+後MDEF) / (1000+10 x 後MDEF) - 前MDEF)
                    x 屬性倍率
                    x (1 + 技能增傷的卡裝%)  x (1 + 技能增傷的技能%)
                    x ( 天使之怒或天罰(效果不累加) 1 + 100% )
                    x ( 潛擊 1 + 30%(BOSS型怪為15%) )
                    */
                },
                UIPanel: {
                    General: true,
                    ATKCompute: false,
                    MATKCompute: false,
                    SwordmanSkillPage: false,
                    MageSkillPage: false,
                    ArcherSkillPage: false,
                    MerchantSkillPage: false,
                    ThiefSkillPage: false,
                    AcolyteSkillPage: false,
                    TaekwonSkillPage: false,
                    StarEmperorSkillPage: false,
                    SoulReaperSkillPage: false,
                    EquipSkillPage: false,
                    SpecialATKPage: false,

                    SpecialthanksPanel: false,
                    StatusDBDialog: false,
                    SkillDBDialog: false,
                    EquipDBDialog: false,
                    EquipEffectDialog: false,
                    QuickCalcDialog: false,
                },
            },
            methods: {
                TogglePanel(id) {
                    this.UIPanel[id] = !this.UIPanel[id];
                },
                ClosePanel(id) {
                    this.UIPanel[id] = false;
                },
                CombineEquipsAttribute() {
                    this.effecttypelist.forEach(element => {
                        var result = 0;
                        result = Enumerable.From(this.equipspartlist)
                            .Where("($.effectlist).some(function (x) { return x.EffectType.id == '" + element.id + "'; })")
                            .Select(function (x) {
                                var xx = x.effectlist.filter(x => x.EffectType.id == (element.id.toString()))
                                return Number(xx[0].EffectNumber);
                            })
                            .Sum();
                        element.totalvalue = result;
                    });
                    this.onOption();
                    /*
                    //全身裝的 ATK 效果加總
                    //方法一
                    var idd = 'ATK'
                    var ef = Enumerable
                        .from(this.equipspartlist)
                        .where(function(e){ return e.effectlist.find(x=> x.EffectType.id == idd); })
                        //.select("value, index => value.effectlist.filter(x => x.EffectType.id == 'ATK')")
                        .select(function (x) {
                            var xx = x.effectlist.filter(x => x.EffectType.id == (element.id.toString()))
                            return Number(xx[0].EffectNumber);
                        })
                        .sum();
                    console.log(ef);
                    
                    //方法2 參考 https://stackoverflow.com/questions/33739726/linq-js-get-subitems
                    var result = Enumerable.from(this.equipspartlist)
                        .where("($.effectlist).some(function (x) { return x.EffectType.id == 'ATK'; })")
                        .select("Number($.effectlist[0].EffectNumber)")
                        .sum();

                    console.log("result:" + result);
                    */
                },
                AddEffect() {
                    if (this.effectdialogue.EffectNumber === '') { return; }

                    // 檢查已經存在該效果後覆蓋
                    if (this.equipspartlist[this.EquipSelectId].effectlist.length > 0) {
                        var index = this.equipspartlist[this.EquipSelectId].effectlist.findIndex(x => this.effectdialogue.EffectType.label === x.EffectType.label);

                        if (index > -1) {
                            this.equipspartlist[this.EquipSelectId].effectlist[index] = {
                                EffectNumber: Number(this.effectdialogue.EffectNumber),
                                EffectType: this.effectdialogue.EffectType
                            };
                            console.log("CoverEffect: " + this.equipspartlist[this.EquipSelectId].effectlist[index].EffectType + " /" + this.equipspartlist[this.EquipSelectId].effectlist[index].EffectNumber);

                            this.$set(this.equipspartlist[this.EquipSelectId].effectlist,
                                index,
                                {
                                    EffectNumber: Number(this.equipspartlist[this.EquipSelectId].effectlist[index].EffectNumber),
                                    EffectType: this.equipspartlist[this.EquipSelectId].effectlist[index].EffectType
                                })
                            this.effectdialogue.EffectNumber = '';
                            this.ClosePanel('EquipEffectDialog');
                            this.CombineEquipsAttribute();
                            return;
                        }
                    }
                    this.equipspartlist[this.EquipSelectId].effectlist.push({
                        EffectNumber: Number(this.effectdialogue.EffectNumber),
                        EffectType: this.effectdialogue.EffectType,
                    })
                    console.log("AddEffect: " + this.effectdialogue.EffectType + " /" + this.effectdialogue.EffectNumber);
                    this.effectdialogue.EffectNumber = '';
                    this.ClosePanel('EquipEffectDialog');
                    this.CombineEquipsAttribute();
                },
                RemoveEffect(eqindex, index) {
                    console.log("RemoveEffect: [" + eqindex + "] " + index);
                    //var index = this.equipspartlist[eqindex].indexOf(item)
                    if (index >= 0) {
                        this.equipspartlist[eqindex].effectlist.splice(index, 1)
                        this.CombineEquipsAttribute();
                    }
                },
                onSelectedDrug(item) {
                    console.log("onSelectedDrug " + item.label);
                },
                onSelectEffect(item)
                {
                    this.effectdialogue.EffectType = item;
                },
                OpenEffectDialogue(eqindex) {
                    this.UIPanel['EquipEffectDialog'] = true;
                    this.EquipSelectId = eqindex;
                    this.EquipSelectLabel = this.equipspartlist[eqindex].label;
                },
                CloseEffectDialogue() {
                    this.EquipSelectId = '';
                },
                ComputRefineATK() {
                    this.weapon.refineatk = this.weapon.refinelevel * this.weaponlevellist[this.weapon.level.id - 1].upgradeatk;
                    if (this.weapon.refinelevel <= this.weaponlevellist[this.weapon.level.id - 1].saferefine) {
                        this.weapon.refineatk2 = 0;
                    }
                    else {
                        this.weapon.refineatk2 = (this.weapon.refinelevel - this.weaponlevellist[this.weapon.level.id - 1].saferefine)
                            * this.weaponlevellist[this.weapon.level.id - 1].overatk
                    }

                    if (this.weapon.type.id === 'Bows') {
                        this.weapon.refineatk2 = 0;
                    }
                },
                onSelectedWeaponLevel(item) {
                    this.ComputRefineATK();
                },
                onSelectedWeaponType(item) {
                    this.ChangeWeapon();
                },
                ChangeWeapon() {
                    this.weapon.sizefix = '小 ' + this.weapon.type.sizefix.small + '% / 中 ' +
                        this.weapon.type.sizefix.middle + '% / 大 ' + this.weapon.type.sizefix.big + '\%';
                    this.ComputRefineATK();
                    this.ComputeSizefix();
                },
                onChangeRefineLevel() {
                    this.ComputRefineATK();
                },
                onStatusChange() {
                    //this.status.STR = eval(this.$refs.STRInput.value);
                    if (this.status.STR == '') this.status.STR = 0;
                    if (this.status.AGI == '') this.status.AGI = 0;
                    if (this.status.VIT == '') this.status.VIT = 0;
                    if (this.status.INT == '') this.status.INT = 0;
                    if (this.status.DEX == '') this.status.DEX = 0;
                    if (this.status.LUK == '') this.status.LUK = 0;
                    this.ComputStatus();
                },
                ComputStatus() {
                    try {
                        this.status_total.STR = Number(eval(this.status.STR)) + Number(this.status_add.STR);
                        this.status_total.AGI = Number(eval(this.status.AGI)) + Number(this.status_add.AGI);
                        this.status_total.VIT = Number(eval(this.status.VIT)) + Number(this.status_add.VIT);
                        this.status_total.INT = Number(eval(this.status.INT)) + Number(this.status_add.INT);
                        this.status_total.DEX = Number(eval(this.status.DEX)) + Number(this.status_add.DEX);
                        this.status_total.LUK = Number(eval(this.status.LUK)) + Number(this.status_add.LUK);
                        this.onSkillPercentChange();
                    } catch (e) {
                        console.log("ComputStatus error " + e);
                    }
                },
                getElementalPercent(attackelementalid, enemyelemental, enemyelementlevel) {
                    var count = this.elementtypelist.length;
                    var _base = attackelementalid * count;
                    var _enemy = enemyelemental;
                    var _level = (enemyelementlevel - 1) * count * count
                    var percent = this.elementalmap[_base + _enemy + _level];
                    return percent;
                },
                ComputElementalPercent() {
                    this.skilloption.ElementalPercent = this.getElementalPercent(
                        this.skilloption.AttackElementalIdx,
                        this.enemyattribute.elemental,
                        this.enemyattribute.elementallevel);
                    this.onOption();
                },
                ComputeSizefix() {
                    if (this.option.WeaponPerfection) {
                        this.computeattribute.sizefix = 100;
                    }
                    else if (this.option.Riding && this.weapon.type.id == 'Spears') {
                        this.computeattribute.sizefix = 100;
                    } else {
                        switch (this.enemyattribute.size) {
                            case 0:
                                this.computeattribute.sizefix = this.weapon.type.sizefix.small;
                                break;
                            case 1:
                                this.computeattribute.sizefix = this.weapon.type.sizefix.middle;
                                break;
                            case 2:
                                this.computeattribute.sizefix = this.weapon.type.sizefix.big;
                                break;
                        }
                    }
                    this.onOption();
                },
                ComputeATKAtttibute() {
                    // Math.ceil 進位  Math.floor 捨去 Math.round 4捨5入
                    var TempSTR = this.status_total.STR;
                    var TempDEX = this.status_total.DEX;
                    if (this.weapon.type.id === 'Bows' || this.weapon.type.id === 'Instruments' || this.weapon.type.id === 'Whips' || this.weapon.type.id === 'Guns') {
                        TempSTR = this.status_total.DEX;
                        TempDEX = this.status_total.STR;
                    }
                    this.attritube.StatusATK = Math.floor(this.status.Level / 4 + TempSTR + TempDEX / 5 + this.status_total.LUK / 3);

                    var para1 = TempSTR / 200;
                    var para2 = this.weapon.level.id * 0.05
                    this.computeattribute.atkc0_min = Math.floor(Number(this.weapon.ATK)* (1 + para1 - para2));
                    this.computeattribute.atkc0_max = Math.floor(Number(this.weapon.ATK)* (1 + para1 + para2));
                    if( this.option.MaximizePower ) this.computeattribute.atkc0_min = this.computeattribute.atkc0_max;

                    var para3 = Number(this.weapon.refineatk) + this.computeattribute['SpecialATK1'];
                    var paraminirefineatk2 = this.weapon.refineatk2 > 0? 1:0;
                    this.computeattribute.atkc1_min = Number(this.computeattribute.atkc0_min) + para3 + Number(paraminirefineatk2);
                    this.computeattribute.atkc1_max = Number(this.computeattribute.atkc0_max) + para3 + Number(this.weapon.refineatk2);

                    if (this.computeattribute.sizefix < 100) {
                        this.computeattribute.atkc2_min = Math.floor(Number(this.computeattribute.atkc1_min)*(this.computeattribute.sizefix / 100));
                        this.computeattribute.atkc2_max = Math.floor(Number(this.computeattribute.atkc1_max)*(this.computeattribute.sizefix / 100));
                    }
                    else {
                        this.computeattribute.atkc2_min = Number(this.computeattribute.atkc1_min);
                        this.computeattribute.atkc2_max = Number(this.computeattribute.atkc1_max);
                    }
                    this.computeattribute.atkc2_min += Number(this.weapon.ArrowATK);
                    this.computeattribute.atkc2_max += Number(this.weapon.ArrowATK);

                    var para5 = 0; //屬性
                    if (this.option.MagnumBreak) { para5 = 1; }
                    else if (this.option.EnchantDeadlyPoison) { para5 = 5; }
                    var para5value = this.getElementalPercent(para5,
                        this.enemyattribute.elemental,
                        this.enemyattribute.elementallevel);
                    var para6 = Number(1) + (this.option.MagnumPoison2Value / 100) * (para5value / 100);
                    this.computeattribute.weaponatk_min = this.MulOper(this.computeattribute.atkc2_min, para6);
                    this.computeattribute.weaponatk_max = this.MulOper(this.computeattribute.atkc2_max, para6);

                    this.computeattribute.weaponatk_min += this.attritube['ATK'];
                    this.computeattribute.weaponatk_max += this.attritube['ATK'];

                    var para_race = Number(1) + Number(this.effecttypelist.find(x => x.id == 'RaceAtkPercent').totalvalue) / 100;
                    var para_size = Number(1) + Number(this.effecttypelist.find(x => x.id == 'SizeAtkPercent').totalvalue) / 100;
                    var para_elemt = Number(1) + Number(this.effecttypelist.find(x => x.id == 'ElementalAtkPercent').totalvalue) / 100;
                    var para_level = Number(1) + Number(this.effecttypelist.find(x => x.id == 'LevelAtkPercent').totalvalue) / 100;
                    var para_posion = Number(1) + (this.option.EnchantDeadlyPoison ? (Number(this.option.EnchantDeadlyPoisonPercent / 100)) : Number(0));
                    this.computeattribute.atkequip_min = this.MulOper(this.computeattribute.weaponatk_min, para_race);
                    this.computeattribute.atkequip_max = this.MulOper(this.computeattribute.weaponatk_max, para_race);
                    this.computeattribute.atkequip_min = this.MulOper(this.computeattribute.atkequip_min, para_size);
                    this.computeattribute.atkequip_max = this.MulOper(this.computeattribute.atkequip_max, para_size);
                    this.computeattribute.atkequip_min = this.MulOper(this.computeattribute.atkequip_min, para_elemt);
                    this.computeattribute.atkequip_max = this.MulOper(this.computeattribute.atkequip_max, para_elemt);
                    this.computeattribute.atkequip_min = this.MulOper(this.computeattribute.atkequip_min, para_level);
                    this.computeattribute.atkequip_max = this.MulOper(this.computeattribute.atkequip_max, para_level);
                    this.computeattribute.atkequip_min = this.MulOper(this.computeattribute.atkequip_min, para_posion);
                    this.computeattribute.atkequip_max = this.MulOper(this.computeattribute.atkequip_max, para_posion);

                    // 霸氣 ATK% 似乎不適用小於1進位
                    // 從MulOper改為Mathfloor 捨去
                    this.computeattribute.atkbranch_min = Math.floor(this.computeattribute.weaponatk_min * (this.attritube['ATKP']) / 100);
                    this.computeattribute.atkbranch_max = Math.floor(this.computeattribute.weaponatk_max * (this.attritube['ATKP']) / 100);

                    this.computeattribute.atkbranch_min = this.MulOper(this.computeattribute.atkbranch_min, Number(1) + Number(this.enemyattribute.sizeResist / 100));
                    this.computeattribute.atkbranch_max = this.MulOper(this.computeattribute.atkbranch_max, Number(1) + Number(this.enemyattribute.sizeResist / 100));
                    this.computeattribute.atkbranch_min = this.MulOper(this.computeattribute.atkbranch_min, Number(1) + Number(this.enemyattribute.levelResist / 100));
                    this.computeattribute.atkbranch_max = this.MulOper(this.computeattribute.atkbranch_max, Number(1) + Number(this.enemyattribute.levelResist / 100));
                    this.computeattribute.atkbranch_min = this.MulOper(this.computeattribute.atkbranch_min, Number(1) + Number(this.enemyattribute.elementalResist / 100));
                    this.computeattribute.atkbranch_max = this.MulOper(this.computeattribute.atkbranch_max, Number(1) + Number(this.enemyattribute.elementalResist / 100));
                    this.computeattribute.atkbranch_min = this.MulOper(this.computeattribute.atkbranch_min, Number(1) + Number(this.enemyattribute.moneletResist / 100));
                    this.computeattribute.atkbranch_max = this.MulOper(this.computeattribute.atkbranch_max, Number(1) + Number(this.enemyattribute.moneletResist / 100));   

                    this.computeattribute.atkc4_min = this.computeattribute.atkequip_min + this.computeattribute.atkbranch_min + Number(this.computeattribute['SpecialATK2']);
                    this.computeattribute.atkc4_max = this.computeattribute.atkequip_max + this.computeattribute.atkbranch_max + Number(this.computeattribute['SpecialATK2']);

                    this.computeattribute.atkc5_min = this.MulOper(this.computeattribute.atkc4_min, Number(this.skilloption.ElementalPercent / 100));
                    this.computeattribute.atkc5_max = this.MulOper(this.computeattribute.atkc4_max, Number(this.skilloption.ElementalPercent / 100));

                    this.computeattribute.atkc5_min = this.MulOper(this.computeattribute.atkc5_min, Number(1) + Number(this.computeattribute['SpecialATK3'] / 100));
                    this.computeattribute.atkc5_max = this.MulOper(this.computeattribute.atkc5_max, Number(1) + Number(this.computeattribute['SpecialATK3'] / 100));

                    if (this.lefthandweapon) {
                        this.computeattribute.atkc5_min = this.MulOper(this.computeattribute.atkc5_min, Number(0.75));
                        this.computeattribute.atkc5_max = this.MulOper(this.computeattribute.atkc5_max, Number(0.75));
                    }
                    var para7 = (this.lefthandweapon ? Number(this.attritube.StatusATK) : Number(this.attritube.StatusATK * 2));
                    if (this.option.SevenWinde)
                    {
                        var parasevenwinde = this.getElementalPercent(
                                    this.skilloption.AttackElementalIdx,
                                    this.enemyattribute.elemental,
                                    this.enemyattribute.elementallevel);
                        para7 = this.MulOper( Number(para7), Number(parasevenwinde/100) );
                    }
                    this.computeattribute.atkc5_min += Number(para7) + Number(this.skilloption.WeaponMasteryATK);
                    this.computeattribute.atkc5_max += Number(para7) + Number(this.skilloption.WeaponMasteryATK);

                    if (this.option.Kihop)
                    {
                        var paraKihop = Number(1) + Number( (this.option.PartyMemberCount-1)*this.option.KihopLevel*2/100 );
                        this.computeattribute.atkc5_min = this.MulOper(this.computeattribute.atkc5_min, paraKihop);
                        this.computeattribute.atkc5_max = this.MulOper(this.computeattribute.atkc5_max, paraKihop);
                    }

                    if(this.option.SLSMiracle){
                        paraSLSO = this.status.Level + this.status_total.DEX + this.status_total.LUK + this.status_total.STR;
                        paraSLSO = 1 + Math.floor(paraSLSO/3)/100;
                        this.computeattribute.atkc5_min = this.MulOper(this.computeattribute.atkc5_min, Math.floor(paraSLSO));
                        this.computeattribute.atkc5_max = this.MulOper(this.computeattribute.atkc5_max, Math.floor(paraSLSO));
                    }
                    else if(this.option.SLSOpposition){
                        var paraSLSO;
                        switch(this.enemyattribute.size)
                        {
                            case 0:
                            case 1:
                                paraSLSO = this.status.Level + this.status_total.DEX + this.status_total.LUK;
                            break;
                            case 2:
                                paraSLSO = this.status.Level + this.status_total.DEX + this.status_total.LUK + this.status_total.STR;
                            break;
                        }
                        paraSLSO = 1 + Math.floor(paraSLSO/3)/100;
                        this.computeattribute.atkc5_min = this.MulOper(this.computeattribute.atkc5_min, paraSLSO);
                        this.computeattribute.atkc5_max = this.MulOper(this.computeattribute.atkc5_max, paraSLSO);
                    }

                    //暴擊增傷
                    var para_crid = Number(1) + Number(this.attritube['CRIDP']) / 100;
                    if (this.skill.critical)
                    {
                        this.computeattribute.atkskillcritical = this.MulOper(this.computeattribute.atkc5_max, para_crid);
                    }
                    this.computeattribute.atkc6_min = this.computeattribute.atkc5_min;
                    this.computeattribute.atkc6_max = this.computeattribute.atkc5_max;
                    this.computeattribute.normalattack_min = this.computeattribute.atkc5_min, para_crid;
                    this.computeattribute.normalattack_max = this.computeattribute.atkc5_max, para_crid;
                    this.computeattribute.normalcritical = this.MulOper(this.computeattribute.atkc5_max, para_crid);

                    //遠程增傷
                    var para_ranged = Number(1) + Number(this.attritube['RNGDP']) / 100;
                    if (this.skill.ranged) {
                        this.computeattribute.atkc6_min = this.MulOper(this.computeattribute.atkc6_min, para_ranged);
                        this.computeattribute.atkc6_max = this.MulOper(this.computeattribute.atkc6_max, para_ranged);
                        this.computeattribute.atkskillcritical = this.MulOper(this.computeattribute.atkskillcritical, para_ranged);
                    }
                    if (this.weapon.type.isRangedattack) {
                        this.computeattribute.normalattack_min = this.MulOper(this.computeattribute.atkc6_min, para_ranged);
                        this.computeattribute.normalattack_max = this.MulOper(this.computeattribute.atkc6_max, para_ranged);
                        this.computeattribute.normalcritical = this.MulOper(this.computeattribute.normalcritical, para_ranged);
                    }

                    //技能倍率 
                    var para_sk = Number(1) + Number(this.computeattribute['SpecialATK4']/100);
                    var para_na = Number(this.computeattribute['SpecialATK5']);
                    var para8 = this.MulOper(Math.floor(Number(this.option.SkillPercent)), para_sk) + Number(para_na); // 這邊不確定SpecialATK3跟 para8要 先乘再加 還是 先加再乘
                    para_na = Number(1) + Number(para_na / 100);
                    para8 = Number(para8 / 100);
                    this.computeattribute.atkc7_min = this.MulOper(this.computeattribute.atkc6_min, para8);
                    this.computeattribute.atkc7_max = this.MulOper(this.computeattribute.atkc6_max, para8);
                    this.computeattribute.atkskillcritical = this.MulOper(this.computeattribute.atkskillcritical, para8);
                    this.computeattribute.normalattack_min = this.MulOper(this.computeattribute.normalattack_min, para_na);
                    this.computeattribute.normalattack_max = this.MulOper(this.computeattribute.normalattack_max, para_na);
                    this.computeattribute.normalcritical = this.MulOper(this.computeattribute.normalcritical, para_na);
                    //高階拳刃修練
                    if (this.option.AdvancedKatarReserch) {
                        var paraAdvancedKatarReserchValue = Number(1) + Number(this.option.AdvancedKatarReserchValue / 100);
                        this.computeattribute.atkc7_min = this.MulOper(this.computeattribute.atkc7_min, paraAdvancedKatarReserchValue);
                        this.computeattribute.atkc7_max = this.MulOper(this.computeattribute.atkc7_max, paraAdvancedKatarReserchValue);
                        this.computeattribute.atkskillcritical = this.MulOper(this.computeattribute.atkskillcritical, paraAdvancedKatarReserchValue);
                        this.computeattribute.normalattack_min = this.MulOper(this.computeattribute.normalattack_min, paraAdvancedKatarReserchValue);
                        this.computeattribute.normalattack_max = this.MulOper(this.computeattribute.normalattack_max, paraAdvancedKatarReserchValue);
                        this.computeattribute.normalcritical = this.MulOper(this.computeattribute.normalcritical, paraAdvancedKatarReserchValue);
                    }
                    //敵方DEF
                    if( this.option.IgnoreDEF == false)
                    {
                        var parabypassDEF = Number(1) - Number(this.attritube['BYPASSDEF']) / 100;
                        var paraDEF = ((4000 + this.MulOper(Number(this.enemyattribute.WeaponDEF), parabypassDEF)) /
                            (4000 + 10 * this.MulOper(Number(this.enemyattribute.WeaponDEF), parabypassDEF)));
                        this.computeattribute.enemydef = (paraDEF * 100).toFixed(2);
                        if( this.skill.transWeaponDEF ){
                            this.computeattribute.atkc7_min = this.computeattribute.atkc7_min - Number(this.enemyattribute.WeaponDEF) - Number(this.enemyattribute.StatusDEF);
                            this.computeattribute.atkc7_max = this.computeattribute.atkc7_max - Number(this.enemyattribute.WeaponDEF) - Number(this.enemyattribute.StatusDEF);
                            this.computeattribute.atkskillcritical = this.computeattribute.atkskillcritical - Number(this.enemyattribute.WeaponDEF) - Number(this.enemyattribute.StatusDEF);
                        }else{
                            this.computeattribute.atkc7_min = Math.floor(this.computeattribute.atkc7_min * paraDEF) - Number(this.enemyattribute.StatusDEF);
                            this.computeattribute.atkc7_max = Math.floor(this.computeattribute.atkc7_max * paraDEF) - Number(this.enemyattribute.StatusDEF);
                            this.computeattribute.atkskillcritical = Math.floor(this.computeattribute.atkskillcritical * paraDEF) - Number(this.enemyattribute.StatusDEF);
                        }
                        this.computeattribute.normalattack_min = Math.floor(this.computeattribute.normalattack_min * paraDEF) - Number(this.enemyattribute.StatusDEF);
                        this.computeattribute.normalattack_max = Math.floor(this.computeattribute.normalattack_max * paraDEF) - Number(this.enemyattribute.StatusDEF);
                        this.computeattribute.normalcritical = Math.floor(this.computeattribute.normalcritical * paraDEF) - Number(this.enemyattribute.StatusDEF);
                    }

                    this.computeattribute.atkc8_min = this.computeattribute.atkc7_min;
                    this.computeattribute.atkc8_max = this.computeattribute.atkc7_max;
                    var parasp6 = Number(this.computeattribute['SpecialATK6']);
                    this.computeattribute.atkc8_min += parasp6;
                    this.computeattribute.atkc8_max += parasp6;
                    this.computeattribute.atkskillcritical += parasp6;
                    this.computeattribute.normalattack_min += parasp6;
                    this.computeattribute.normalattack_max += parasp6;
                    this.computeattribute.normalcritical += parasp6;

                    // 技能增傷裝
                    this.computeattribute.atkc8_min = this.MulOper(this.computeattribute.atkc8_min, Number(1) + Number(this.option.EquipSkillAddDamage / 100));
                    this.computeattribute.atkc8_max = this.MulOper(this.computeattribute.atkc8_max, Number(1) + Number(this.option.EquipSkillAddDamage / 100));
                    this.computeattribute.atkskillcritical = this.MulOper(this.computeattribute.atkskillcritical, Number(1) + Number(this.option.EquipSkillAddDamage / 100));
                    

                    this.computeattribute.atkc9_min = this.computeattribute.atkc8_min;
                    this.computeattribute.atkc9_max = this.computeattribute.atkc8_max;
                    // 技能暴擊 *1.4
                    if (this.skill.critical) {
                        this.computeattribute.atkskillcritical = this.MulOper(this.computeattribute.atkskillcritical, Number(1) + Number(this.option.BaseCriticalValue / 100));
                    }
                    
                    var _paradiv = this.skill.hitnumber;
                    if (_paradiv == 0) _paradiv = 1;
                    if (_paradiv < 0) {
                        _paradiv *= -1;
                        this.computeattribute.atkc9_min = Math.floor(this.computeattribute.atkc9_min / _paradiv);
                        this.computeattribute.atkc9_max = Math.floor(this.computeattribute.atkc9_max / _paradiv);
                    }
                    this.computeattribute.atkmulti_min = this.computeattribute.atkc9_min * _paradiv;
                    this.computeattribute.atkmulti_max = this.computeattribute.atkc9_max * _paradiv;
                    // 普攻暴擊 *1.4
                    this.computeattribute.normalcritical = this.MulOper(this.computeattribute.normalcritical, Number(1) + Number(this.option.BaseCriticalValue / 100));


                },
                MulOper(value, percent) {
                    if (percent > 1) {
                        var _S = Math.round(value * (Number(percent) * 100));
                        var _L = Math.floor(_S / 100);
                        return _L;
                    }
                    if (percent < 1) {
                        var _S = Math.round(value * (Number(percent) * 100));
                        var _L = Math.ceil(_S / 100);
                        return _L;
                    }
                    return value * percent;
                },
                ComputeMATKAtttibute() {
                    this.attritube.StatusMATK = (
                        Math.floor(this.status_total.INT * 1.5) +
                        Math.floor(this.status_total.LUK / 3) +
                        Math.floor(this.status.Level / 4) +
                        Math.floor(this.status_total.DEX / 5)
                    );

                    var para1 = this.weapon.level.id * 0.1;
                    var paraminirefineatk2 = this.weapon.refineatk2 > 0? 1:0;
                    var floatmatk_min = (1 - para1);
                    var floatmatk_max = (1 + para1);
                    if(this.option.RECOGNIZEDSPELL) floatmatk_min = floatmatk_max;
                    this.computeattribute.weaponmatk_min = Number(this.attritube.StatusMATK) +
                        Math.floor((Number(this.weapon.MATK) + Number(this.weapon.refineatk)) * floatmatk_min)+Number(paraminirefineatk2);
                    this.computeattribute.weaponmatk_max = Number(this.attritube.StatusMATK) +
                        Math.floor((Number(this.weapon.MATK) + Number(this.weapon.refineatk)) * floatmatk_max)+Number(this.weapon.refineatk2);

                    var para2 = Number(1) + (this.option.MagicPower ? Number(this.option.MagicPowerValue / 100) : 0);
                    var para3 = this.attritube['MATK'];
                    this.computeattribute.equipmatk_min = this.MulOper(this.computeattribute.weaponmatk_min, para2) + para3;
                    this.computeattribute.equipmatk_max = this.MulOper(this.computeattribute.weaponmatk_max, para2) + para3;

                    var para4 = Number(1) + Number(this.effecttypelist.find(x => x.id == 'MatkPercent').totalvalue / 100) +
                        Number(this.effecttypelist.find(x => x.id == 'LevelMatkPercent').totalvalue / 100);
                    this.computeattribute.matkpercent_min = this.MulOper(this.computeattribute.equipmatk_min, para4);
                    this.computeattribute.matkpercent_max = this.MulOper(this.computeattribute.equipmatk_max, para4);


                    var para_elemt = Number(1) + Number(this.effecttypelist.find(x => x.id == 'ElementalMatkPercent').totalvalue) / 100;
                    var para_magicelemt = Number(1) + Number(this.effecttypelist.find(x => x.id == 'ElementalMagicPercent').totalvalue) / 100;
                    var para_race = Number(1) + Number(this.effecttypelist.find(x => x.id == 'RaceMatkPercent').totalvalue) / 100;
                    var para_size = Number(1) + Number(this.effecttypelist.find(x => x.id == 'SizeMatkPercent').totalvalue) / 100;
                    this.computeattribute.finalmatk_min = this.MulOper(this.computeattribute.matkpercent_min, para_elemt);
                    this.computeattribute.finalmatk_max = this.MulOper(this.computeattribute.matkpercent_max, para_elemt);
                    this.computeattribute.finalmatk_min = this.MulOper(this.computeattribute.finalmatk_min, para_magicelemt);
                    this.computeattribute.finalmatk_max = this.MulOper(this.computeattribute.finalmatk_max, para_magicelemt);
                    this.computeattribute.finalmatk_min = this.MulOper(this.computeattribute.finalmatk_min, para_race);
                    this.computeattribute.finalmatk_max = this.MulOper(this.computeattribute.finalmatk_max, para_race);
                    this.computeattribute.finalmatk_min = this.MulOper(this.computeattribute.finalmatk_min, para_size);
                    this.computeattribute.finalmatk_max = this.MulOper(this.computeattribute.finalmatk_max, para_size);

                    this.computeattribute.matk1_min = this.MulOper(this.computeattribute.finalmatk_min, Number(1) + Number(this.enemyattribute.sizeResist / 100));
                    this.computeattribute.matk1_max = this.MulOper(this.computeattribute.finalmatk_max, Number(1) + Number(this.enemyattribute.sizeResist / 100));
                    this.computeattribute.matk1_min = this.MulOper(this.computeattribute.matk1_min, Number(1) + Number(this.enemyattribute.elementalResist / 100));
                    this.computeattribute.matk1_max = this.MulOper(this.computeattribute.matk1_max, Number(1) + Number(this.enemyattribute.elementalResist / 100));
                    this.computeattribute.matk1_min = this.MulOper(this.computeattribute.matk1_min, Number(1) + Number(this.enemyattribute.raceResist / 100));
                    this.computeattribute.matk1_max = this.MulOper(this.computeattribute.matk1_max, Number(1) + Number(this.enemyattribute.raceResist / 100));
                    this.computeattribute.matk1_min = this.MulOper(this.computeattribute.matk1_min, Number(1) + Number(this.enemyattribute.levelResist / 100));
                    this.computeattribute.matk1_max = this.MulOper(this.computeattribute.matk1_max, Number(1) + Number(this.enemyattribute.levelResist / 100));

                    if( this.skill.laterformula == false )
                    {
                        this.option.SkillPercent = Math.floor( this.option.SkillPercent );
                        this.computeattribute.skillmatk_min = this.MulOper(this.computeattribute.matk1_min, Number(this.option.SkillPercent / 100));
                        this.computeattribute.skillmatk_max = this.MulOper(this.computeattribute.matk1_max, Number(this.option.SkillPercent / 100));
                    }else{
                        this.computeattribute.skillmatk_min = this.computeattribute.matk1_min;
                        this.computeattribute.skillmatk_max = this.computeattribute.matk1_max;
                    }

                    this.computeattribute.matk2_min = this.computeattribute.skillmatk_min;
                    this.computeattribute.matk2_max = this.computeattribute.skillmatk_max;
                    if( this.option.IgnoreMDEF == false)
                    {
                        var parabypassMDEF = Number(1) - Number(this.attritube['BYPASSMDEF']) / 100;
                         var paraMDEF = ((1000 + this.MulOper(Number(this.enemyattribute.WeaponMDEF), parabypassMDEF)) /
                             (1000 + 10 * this.MulOper(Number(this.enemyattribute.WeaponMDEF), parabypassMDEF)));
                        this.computeattribute.enemymdef = (paraMDEF * 100).toFixed(2);
                        this.computeattribute.matk2_min = Math.floor(this.computeattribute.skillmatk_min * paraMDEF) - Number(this.enemyattribute.StatusMDEF);
                        this.computeattribute.matk2_max = Math.floor(this.computeattribute.skillmatk_max * paraMDEF) - Number(this.enemyattribute.StatusMDEF);
                    }

                    if( this.skill.laterformula == true )
                    {
                        this.option.SkillPercent = Math.floor( this.option.SkillPercent );
                        this.computeattribute.skillmatk_min = this.MulOper(this.computeattribute.matk2_min, Number(this.option.SkillPercent / 100));
                        this.computeattribute.skillmatk_max = this.MulOper(this.computeattribute.matk2_max, Number(this.option.SkillPercent / 100));
                    }else{
                        this.computeattribute.skillmatk_min = this.computeattribute.matk2_min;
                        this.computeattribute.skillmatk_max = this.computeattribute.matk2_max;
                    }

                    this.computeattribute.matk3_min = this.MulOper(this.computeattribute.skillmatk_min, Number(1) + Number(this.option.EquipSkillAddDamage / 100));
                    this.computeattribute.matk3_max = this.MulOper(this.computeattribute.skillmatk_max, Number(1) + Number(this.option.EquipSkillAddDamage / 100));

                    this.computeattribute.matk4_min = this.MulOper(this.computeattribute.matk3_min, Number(this.skilloption.ElementalPercent / 100));
                    this.computeattribute.matk4_max = this.MulOper(this.computeattribute.matk3_max, Number(this.skilloption.ElementalPercent / 100));

                    var _paradiv = this.skill.hitnumber;
                    if (_paradiv == 0) _paradiv = 1;
                    if (_paradiv < 0) {
                        _paradiv *= -1;
                        this.computeattribute.matk4_min = Math.floor(this.computeattribute.matk4_min / _paradiv);
                        this.computeattribute.matk4_max = Math.floor(this.computeattribute.matk4_max / _paradiv);
                    }

                    this.computeattribute.matkmulti_min = this.computeattribute.matk4_min * _paradiv;
                    this.computeattribute.matkmulti_max = this.computeattribute.matk4_max * _paradiv;

                    // if (this.option.SPELLFIST) {
                    //     var paraSPELLFIST = this.skill.level / 2 + this.option.ElementalBlotLevel;
                    //     this.computeattribute.matkmulti_min = this.MulOper(this.computeattribute.matkmulti_min, paraSPELLFIST);
                    //     this.computeattribute.matkmulti_max = this.MulOper(this.computeattribute.matkmulti_max, paraSPELLFIST);
                    // }

                    /*
                        weaponmatk_min: 0,  // statusmatk + (( 武器MATK + 精煉MATK ) x ( 1 -  武器等級 x 0.10 ))
                        weaponmatk_max: 0,  // statusmatk + (( 武器MATK + 精煉MATK ) x ( 1 +  武器等級 x 0.10 ))
                        equipmatk_min: 0,   // weaponmatk_min x (1 + 0.05 × 魔力增幅等級 ) + 卡裝MATK )
                        equipmatk_max: 0, 
                        matkpercent_min: 0, // equipmatk_min x 本身( 1 + MATK增傷%)
                        matkpercent_max: 0,
                        finalmatk_min: 0,   // x ( 1 + 我方屬性增傷%) x ( 1 + 對方屬性增傷%) x ( 1+ 種族增傷%) x (1 + 體型增傷%)
                        finalmatk_max: 0,
                        matk1_min: 0,  // 對方為喵族 ( 1 + 10% ) x 對方(1 -  體型減傷%) x ( 1-  屬性減傷%) x ( 1 - 種族減傷%) x ( 1 -  階級減傷% )
                        matk1_max: 0,
                        skillmatk_min: 0,   //x 本身(技能倍率%)
                        skillmatk_max: 0,
                        matk2_min: 0,      //x 對方(1000+後MDEF) / (1000+10 x 後MDEF) - 前MDEF)
                        matk2_max: 0,
                        matk3_min: 0,       // x 屬性倍率
                        matk3_max: 0,
                        matk4_min: 0,       // x (1 + 技能增傷的卡裝%)  x (1 + 技能增傷的技能%)
                        matk4_max: 0,
                    */

                },
                onChangeEnemyStatus() {

                },
                onSelectEnemy(item) {
                    // 拿資料 傳值就好
                    //https://wcc723.github.io/javascript/2017/12/10/javascript-reference/
                    this.enemyattribute = Object.assign({}, item);
                    console.log("onSelectEnemy: " + this.enemyattribute.elemental);
                },
                onSkillPercentChange() {
                    if (this.skill.hitnumber == '') this.skill.hitnumber = 1;
                    if (this.skill.level == '') this.skill.level = 1;
                    var _formula = this.skill.formula;
                    if (this.status.level < 100) _formula = _formula.replace(new RegExp("BLV", "g"), "100");
                    this.option.SkillPercent = eval(this.SkillFormulaReplace(_formula));
                    this.ComputeATKAtttibute();
                    this.ComputeMATKAtttibute();
                },
                SkillFormulaReplace(f) {
                    for (x of this.KeywordReplaceList) {
                        f = f.replace(new RegExp(x.str1, "g"), x.str2);
                    }
                    return f
                },
                onSpecialATKChange(){
                    this.ComputeATKAtttibute();
                },
                ResetOption() {
                    this.option = Object.assign({}, this.option_init);
                    this.ComputeSizefix(); // 包含onOption
                },
                onOption() {
                    this.status_add = Object.assign({}, this.status_add_init);
                    this.attritube = Object.assign({}, this.attritube_init);

                    if (this.option.EquipSkillAddDamage == '') this.option.EquipSkillAddDamage = 0;
                    if (this.skilloption.WeaponMasteryATKInput == '') this.skilloption.WeaponMasteryATKInput = 0;
                    this.skilloption.WeaponMasteryATK = this.skilloption.WeaponMasteryATKInput;
                    this.computeattribute['SpecialATK1'] = 0;   // 打強 點穴
                    this.computeattribute['SpecialATK2'] = 0;   // 練習舞蹈 砲彈ATK
                    this.computeattribute['SpecialATK3'] = 0;   // 毒弱
                    this.computeattribute['SpecialATK4'] = 0;   // 戰斧風屬性倍率 
                    this.computeattribute['SpecialATK5'] = 0;   // 兇砍 狂怒之槍
                    this.computeattribute['SpecialATK6'] = 0;   // 靈氣劍

                    //雙手劍攻擊速度增加
                    if (this.option.TwoHandQuicken) {
                        if (this.weapon.type.id == 'TwoHandedSword') {
                            this.attritube['CRI'] += 12;
                            this.attritube['HIT'] += 20;
                            this.attritube['ASPDP'] += 40;
                        }
                    }
                    // 集中
                    if (this.option.Concentration) {
                        this.attritube['ATKP'] += 15;
                        this.attritube['HIT'] += 50;
                    }
                    if (this.option.AuraBlade) {
                        this.computeattribute['SpecialATK6'] += this.status.Level * (3+1*5);
                    }
                    // 狂怒之槍
                    if (this.option.Berserk) {
                        this.computeattribute['SpecialATK5'] += 200;
                    }
                    // 盾咒
                    if( this.option.ShieldSpell ){
                        this.attritube['ATK'] += this.option.ShieldDEF;
                    }
                    // 怒暴
                    if (this.option.MagnumBreak) {
                        this.option.MagnumPoison2Value = this.option.MagnumBreakValue;
                        this.skilloption.AttackElementalIdx = 1;    //改變攻擊屬性 火
                    }
                    // 致毒
                    if (this.option.EnchantDeadlyPoison) {
                        this.option.MagnumPoison2Value = this.option.EnchantDeadlyPoisonValue;
                    }
                    if (this.option.MagnumBreak == false && this.option.EnchantDeadlyPoison == false) {
                        this.option.MagnumPoison2Value = 0;
                    }
                    if (this.option.AdrenalineRush) {
                        if (this.weapon.type.id == 'Axes' || this.weapon.type.id == 'Maces') {
                            this.attritube['ASPDP'] += 40;
                        }
                    }
                    if (this.option.VENOMIMPRESS) {
                        if (this.skilloption.AttackElementalIdx == 5) {
                            this.computeattribute['SpecialATK3'] += this.option.VENOMIMPRESSLevel * 10;
                        }
                    }
                    // 大聲吶喊
                    if (this.option.Loud){
                        this.status_add.STR += 4;
                        this.attritube['ATK'] += 30;
                    }
                    // 兇砍
                    if (this.option.Overthrust) {
                        this.computeattribute['SpecialATK5'] += 5 * 5;
                    }
                    if (this.option.OverthrustParty) {
                        this.computeattribute['SpecialATK5'] += 5 * 3;
                    }
                    if (this.option.OverthrustMax) {
                        this.computeattribute['SpecialATK5'] += 5 * 20;
                    }
                    // 火山塵暴
                    if (this.option.Pyroclastic){
                        this.attritube['ATK'] += Number(this.option.HomunculusLevel) + 10*10;
                    }
                    if (this.skill.cannon){
                        this.computeattribute['SpecialATK2'] += this.weapon.BulletATK;
                    }
                    // 戰斧颶風
                    if (this.option.AxeTornado) {
                        if (this.skilloption.AttackElementalIdx == 3) {
                            this.computeattribute['SpecialATK4'] += 25;
                        }
                    }
                    // 心神
                    if (this.option.AttentionConcentrate) {
                        var _Dex = Math.floor(this.status_total.DEX * Number(this.option.AttentionConcentrateValue / 100));
                        this.status_add.DEX += _Dex;
                        var _Agi = Math.floor(this.status_total.AGI * Number(this.option.AttentionConcentrateValue / 100));
                        this.status_add.AGI += _Agi;
                    }
                    // 狙殺
                    if (this.option.TrueSight) {
                        this.status_add.STR += 5;
                        this.status_add.AGI += 5;
                        this.status_add.VIT += 5;
                        this.status_add.INT += 5;
                        this.status_add.DEX += 5;
                        this.status_add.LUK += 5;
                        this.attritube['CRI'] += 10;
                        this.computeattribute['SpecialATK5'] += 10 * 2;
                    }
                    if (this.option.UNLIMIT) {
                        this.attritube['RNGDP'] += this.option.UNLIMITLevel * 50 + 100;
                    }
                    if (this.option.MusicalDancingLesson) {
                        this.attritube['ATK'] += 3*10;
                    }
                    // 打強
                    if (this.option.Striking) {
                        this.attritube['CRI'] += this.option.StrikingLevel;
                        this.computeattribute['SpecialATK1'] += this.weapon.level.id * (this.option.StrikingLevel * 2 + 8) + this.option.EndowLevel_Total * 5;
                    }
                    // 加速
                    if (this.option.IncreaseAgility) {
                        this.status_add.AGI += 12;
                        this.attritube['ASPDP'] += this.option.IncreaseAgilityValue;
                    }
                    if (this.option.CANTOCANDIDUS){
                        var jc = Math.floor(this.option.ABJobLevel/10);
                        this.status_add.AGI += 12 + jc;
                        this.attritube['ASPDP'] += this.option.IncreaseAgilityValue;
                    }
                    // 天賜
                    if (this.option.Blessing) {
                        this.status_add.STR += 10;
                        this.status_add.INT += 10;
                        this.status_add.DEX += 10;
                        this.attritube['HIT'] += 20;
                    }
                    if (this.option.CREMENTIA){
                        var jc = Math.floor(this.option.ABJobLevel/10);
                        this.status_add.STR += 10 + jc;
                        this.status_add.INT += 10 + jc;
                        this.status_add.DEX += 10 + jc;
                        this.attritube['HIT'] += 20;
                    }
                    if (this.option.SpiritSpheres){
                        this.skilloption.WeaponMasteryATK += this.option.SpiritSpheresCount * 3;
                    }
                    // 點穴
                    if (this.option.GentleTouchCharge) {
                        this.computeattribute['SpecialATK1'] += (this.status_total.STR / 2 + this.status_total.DEX / 4) * 5 / 5;
                        this.attritube['ASPDP'] += this.status_total.AGI * 5 / 60;
                        this.attritube['MDEF'] += 200 / this.status_total.INT * 5;
                    }
                    //神威
                    if (this.option.ImpositioManus) {
                        this.attritube['ATK'] += Number(this.option.ImpositioManusLevel) * 5;
                        this.attritube['MATK'] += Number(this.option.ImpositioManusLevel) * 5;
                    }
                    //祈禱文
                    if (this.option.ORATIO) {
                        if (this.skilloption.AttackElementalIdx == 6) {
                            this.computeattribute['SpecialATK1'] += this.weapon.ATK * ((this.option.ORATIOLevel * 2) / 100);
                        }
                    }
                    //折枝
                    if (this.option.LAUDARAMUS) {
                        this.attritube['CRIDP'] += Number(this.option.LAUDARAMUSLevel) * 5;
                    }
                    if (this.option.EXPIATIO) {
                        this.attritube['BYPASSDEF'] += Number(this.option.EXPIATIOLevel) * 5;
                        this.attritube['BYPASSMDEF'] += Number(this.option.EXPIATIOLevel) * 5;
                    }
                    //融合
                    if (this.option.SLSFusion){
                        this.skill.critical = true;
                    }
                    //靈魂
                    if (this.option.SOULCOLLECT){
                        this.attritube['MATK'] += this.option.SoulCount*3;
                    }
                    if (this.option.SOULSHADOW){
                        this.attritube['CRI'] += 10+2*5;
                        this.attritube['ASPD'] += 3;
                    }
                    if (this.option.SOULFAIRY){
                        this.attritube['MATK'] += 10*5;
                        this.attritube['VCT'] += 10;
                    }
                    if (this.option.SOULFALCON){
                        this.attritube['ATK'] += 10*5;
                        this.attritube['HIT'] += 15;
                    }
                    if (this.option.SOULGOLEM){
                        this.attritube['DEF'] += 60*5;
                        this.attritube['MDEF'] += 15+5*5;
                    }
                    // 奧汀神力
                    if (this.option.OdinsPower && this.option.OdinsPowerLevel > 0) {
                        this.attritube['ATK'] += this.option.OdinsPowerLevel * 30 + 40;
                        this.attritube['MATK'] += this.option.OdinsPowerLevel * 30 + 40;
                        this.attritube['DEF'] -= this.option.OdinsPowerLevel * 20;
                        this.attritube['MDEF'] -= this.option.OdinsPowerLevel * 20;
                    }
                    // 魔劍士
                    if( this.option.MemoryofThanatosCard ){
                        this.attritube['ATK'] += this.enemyattribute.WeaponDEF/2;
                        this.option.IgnoreDEF = true;
                    }

                    var _AllStatus = Number(this.effecttypelist.find(x => x.id == 'AllStatus').totalvalue);
                    this.status_add.STR += Number(this.effecttypelist.find(x => x.id == 'STR').totalvalue) + _AllStatus;
                    this.status_add.AGI += Number(this.effecttypelist.find(x => x.id == 'AGI').totalvalue) + _AllStatus;
                    this.status_add.VIT += Number(this.effecttypelist.find(x => x.id == 'VIT').totalvalue) + _AllStatus;
                    this.status_add.INT += Number(this.effecttypelist.find(x => x.id == 'INT').totalvalue) + _AllStatus;
                    this.status_add.DEX += Number(this.effecttypelist.find(x => x.id == 'DEX').totalvalue) + _AllStatus;
                    this.status_add.LUK += Number(this.effecttypelist.find(x => x.id == 'LUK').totalvalue) + _AllStatus;

                    this.attritube['ATK'] += Number(this.effecttypelist.find(x => x.id == 'Atk').totalvalue);
                    this.attritube['ATKP'] += Number(this.effecttypelist.find(x => x.id == 'AtkPercent').totalvalue);
                    this.attritube['MATK'] += Number(this.effecttypelist.find(x => x.id == 'Matk').totalvalue);
                    this.attritube['CRI'] += Number(this.effecttypelist.find(x => x.id == 'Cri').totalvalue);
                    this.attritube['CRIDP'] += Number(this.effecttypelist.find(x => x.id == 'CriDamagePercent').totalvalue);
                    this.attritube['RNGDP'] += Number(this.effecttypelist.find(x => x.id == 'RangedDamagePercent').totalvalue);
                    this.attritube['BYPASSDEF'] += Number(this.effecttypelist.find(x => x.id == 'BypassDEFPercent').totalvalue);
                    if( this.attritube['BYPASSDEF'] > 100 ) this.attritube['BYPASSDEF'] = 100;
                    this.attritube['BYPASSMDEF'] += Number(this.effecttypelist.find(x => x.id == 'BypassMDEFPercent').totalvalue);
                    if( this.attritube['BYPASSMDEF'] > 100 ) this.attritube['BYPASSMDEF'] = 100;
                    this.attritube['ASPD'] += Number(this.effecttypelist.find(x => x.id == 'ASPD').totalvalue);
                    this.attritube['ASPDP'] += Number(this.effecttypelist.find(x => x.id == 'AspdPercent').totalvalue);
                    this.attritube['ASPDP'] = -Math.abs(this.attritube['ASPDP']);
                    this.attritube['VCT'] += Number(this.effecttypelist.find(x => x.id == 'VariableCastPercent').totalvalue);
                    this.attritube['VCT'] = -Math.abs(this.attritube['VCT']);
                    
                    this.ComputStatus();
                    //this.ComputeATKAtttibute();
                    //this.ComputeMATKAtttibute();
                },
                onOptionMagnumBreak() {
                    if (this.option.MagnumBreak) {
                        this.option.EnchantDeadlyPoison = false;
                    }
                    else{
                        if (this.skilloption.AttackElementalIdx == 1)
                            this.skilloption.AttackElementalIdx = 0;    //改變攻擊屬性 無
                    }
                    this.onOption();
                },
                onOptionEnchantDeadlyPoison() {
                    if (this.option.EnchantDeadlyPoison) {
                        this.option.MagnumBreak = false;
                    }
                    this.onOption();
                },
                onOptionBlessing(type) {
                    switch (type) { 
                        case '1st': this.option.CREMENTIA = false; break;
                        case '3rd': this.option.Blessing = false; break;
                    }
                    this.onOption();
                },
                onOptionIncreaseAgility(type) {
                    switch (type) { 
                        case '1st': this.option.CANTOCANDIDUS = false; break;
                        case '3rd': this.option.IncreaseAgility = false; break;
                    }
                    this.onOption();
                },
                onOptionOverthrust(type) {
                    switch (type) {
                        case 'Self': this.option.OverthrustParty = false; this.option.OverthrustMax = false; break;
                        case 'Party': this.option.Overthrust = false; this.option.OverthrustMax = false; break;
                        case 'Max': this.option.Overthrust = false; this.option.OverthrustParty = false; break;
                    }
                    this.onOption();
                },
                onSoulReaperSoul(type){
                    switch (type) {
                        case 'SOULSHADOW': this.option.SOULFAIRY = false; this.option.SOULFALCON = false; this.option.SOULGOLEM = false; break;
                        case 'SOULFAIRY': this.option.SOULSHADOW = false; this.option.SOULFALCON = false; this.option.SOULGOLEM = false; break;
                        case 'SOULFALCON': this.option.SOULSHADOW = false; this.option.SOULFAIRY = false; this.option.SOULGOLEM = false; break;
                        case 'SOULGOLEM': this.option.SOULSHADOW = false; this.option.SOULFAIRY = false; this.option.SOULFALCON = false; break;
                    }
                    this.onOption();
                },
                onSaveEquip(epidx) {
                    if (this.equipspartlist[epidx].equipname.trim() == '') return;
                    this.StoreDB_Equip.unshift({ 
                        uuid: this._uuid(), 
                        equip: JSON.parse(JSON.stringify(this.equipspartlist[epidx])),
                        date:  Date.now() 
                    });
                    this.SaveEquipDB();
                },
                onClearEquipPart(idx) {
                    var _id = this.equipspartlist[idx].id;
                    var _label = this.equipspartlist[idx].label;
                    this.$set(this.equipspartlist,
                        idx,
                        {
                            id: _id,
                            label: _label,
                            equipname: '',
                            effectlist: [],
                        })
                    this.CombineEquipsAttribute();
                },
                onLoadEquipSave(uuid) {
                    var _dbidx = this.StoreDB_Equip.findIndex( x=>x.uuid == uuid );
                    var idx = this.equipspartlist.findIndex(x => x.id == this.StoreDB_Equip[_dbidx].equip.id);
                    if (idx > -1) {
                        if (idx == 8 && this.equipspartlist[idx].equipname != '') { idx = 9; }
                        if (idx == 9 && this.equipspartlist[idx].equipname != '') { idx = 8; }
                        this.equipspartlist[idx] = JSON.parse(JSON.stringify(this.StoreDB_Equip[_dbidx].equip));
                        this.CombineEquipsAttribute();
                    }
                },
                onRemoveEquipSave(uuid) {
                    var _dbidx = this.StoreDB_Equip.findIndex( x=>x.uuid == uuid );
                    if (_dbidx > -1) {
                        this.StoreDB_Equip.splice(_dbidx, 1)
                        this.SaveEquipDB();
                    }
                },
                onFliterEquipPart()
                {
                },
                onFliterEquipClear()
                {
                    this.StoreDB_EquipFliterGroup = [];
                },
                SaveEquipDB() {
                    const parsed = JSON.stringify(this.StoreDB_Equip);
                    localStorage.setItem('StoreDB_Equip', parsed);
                },
                onSaveStatus() {
                    // https://kanboo.github.io/2018/01/27/JS-ShallowCopy-DeepCopy/
                    // let copy = $.extend(true, {}, obj); //使用 jquery.extend
                    // JSON.parse(JSON.stringify(this.)) 
                    this.StoreDB_Status.unshift({
                        uuid: this._uuid(), name: this.StatusName
                        , statusstring: this.StatusBulidString
                        , status: JSON.parse(JSON.stringify(this.status))
                    });
                    this.SaveStatusDB();
                },
                OpenStatusDBDialogDialogue() {
                    this.UIPanel['StatusDBDialog'] = true;
                    this.StatusBulidString = '';
                    for (const [key, value] of Object.entries(this.status)) {
                        this.StatusBulidString += key + ":" + value + "/";
                    }
                    this.StatusBulidString = this.StatusBulidString.slice(0, this.StatusBulidString.length - 1);
                },
                onLoadStatusSave(saveid) {
                    this.status = Object.assign({}, this.StoreDB_Status[saveid].status);
                    this.StatusName = this.StoreDB_Status[saveid].name;
                    this.onOption();
                    this.ClosePanel('StatusDBDialog');
                },
                onRemoveStatusSave(saveid) {
                    if (saveid > -1) {
                        this.StoreDB_Status.splice(saveid, 1)
                        this.SaveStatusDB();
                    }
                },
                SaveStatusDB() {
                    const parsed = JSON.stringify(this.StoreDB_Status);
                    localStorage.setItem('StoreDB_Status', parsed);
                },
                onQuickCalcInput() {
                    try {
                        this.QuickCalc.solution = eval(this.QuickCalc.formula);
                        this.StoreDB_QuickCalc.unshift({
                            uuid: this._uuid(),
                            formula: this.QuickCalc.formula,
                            solution: this.QuickCalc.solution,
                            remark: this.QuickCalc.remark
                        });
                        if (this.StoreDB_QuickCalc.length > 8)
                            this.StoreDB_QuickCalc.splice(this.StoreDB_QuickCalc.length - 1, 1);
                        const parsed = JSON.stringify(this.StoreDB_QuickCalc);
                        localStorage.setItem('StoreDB_QuickCalc', parsed);
                    } catch (e) {
                        this.QuickCalc.solution = "錯誤:" + e;
                    }
                },
                CloseSkillFormulaDialogue() {
                    if (this.skill.formula == '')
                        this.skill.formula = 0;
                },
                onSaveSkill() {
                    // https://kanboo.github.io/2018/01/27/JS-ShallowCopy-DeepCopy/
                    // let copy = $.extend(true, {}, obj); //使用 jquery.extend
                    // JSON.parse(JSON.stringify(this.)) 
                    if (this.skill.formula == '') { this.option.SkillFormulaError = "公式為空"; return; }
                    if (this.skill.name == '') { this.option.SkillFormulaError = "技能名為空"; return; }
                    if (this.skill.level < 1) this.skill.level = 1;
                    if (this.skill.hitnumber == '') this.skill.hitnumber = 0;
                    this.skill.elemental = this.skilloption.AttackElementalIdx;
                    this.option.SkillFormulaError = '';
                    try {
                        var _valid = eval(this.SkillFormulaReplace(this.skill.formula));
                        this.StoreDB_Skill.unshift({
                            uuid: this._uuid(),
                            skill: Object.assign({}, this.skill)
                        });
                        this.SaveSkillDB();
                    } catch (e) {
                        this.option.SkillFormulaError = "公式錯誤 " + e;
                    }
                },
                onLoadSkillSave(saveid) {
                    this.skill = Object.assign({}, this.StoreDB_Skill[saveid].skill);
                    this.onSkillPercentChange();
                    this.ClosePanel('SkillDBDialog');
                },
                onRemoveSkillSave(saveid) {
                    if (saveid > -1) {
                        this.StoreDB_Skill.splice(saveid, 1)
                        this.SaveSkillDB();
                    }
                },
                SaveSkillDB() {
                    const parsed = JSON.stringify(this.StoreDB_Skill);
                    localStorage.setItem('StoreDB_Skill', parsed);
                },
                LoadDB() {
                    if (localStorage.getItem('StoreDB_Status')) {
                        try {
                            this.StoreDB_Status = JSON.parse(localStorage.getItem('StoreDB_Status'));
                        } catch (e) {
                            console.log("catch e:" + e);
                        }
                    }
                    if (localStorage.getItem('StoreDB_Equip')) {
                        try {
                            this.StoreDB_Equip = JSON.parse(localStorage.getItem('StoreDB_Equip'));
                            Enumerable.From(this.StoreDB_Equip).OrderBy(x => x.equip.id);
                        } catch (e) {
                            console.log("catch e:" + e);
                        }
                    }
                    if (localStorage.getItem('StoreDB_QuickCalc')) {
                        try {
                            this.StoreDB_QuickCalc = JSON.parse(localStorage.getItem('StoreDB_QuickCalc'));
                            Enumerable.From(this.StoreDB_QuickCalc).OrderBy(x => x.id);
                        } catch (e) {
                            console.log("catch e:" + e);
                        }
                    }
                    if (localStorage.getItem('StoreDB_Skill')) {
                        try {
                            this.StoreDB_Skill = JSON.parse(localStorage.getItem('StoreDB_Skill'));
                        } catch (e) {
                            console.log("catch e:" + e);
                        }
                    }

                    this.enemylist.push(
                        { id: 0, name: '自訂', level: 1, elemental: 0, elementallevel: 1, size: 0, StatusDEF: 0, WeaponDEF: 0, StatusMDEF: 0, WeaponMDEF: 0, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 1, name: '蛋Lv10', level: 10, elemental: 0, elementallevel: 1, size: 1, StatusDEF: 5, WeaponDEF: 0, StatusMDEF: 2, WeaponMDEF: 0, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 2, name: '龍蛋Lv100', level: 100, elemental: 0, elementallevel: 1, size: 1, StatusDEF: 50, WeaponDEF: 90, StatusMDEF: 25, WeaponMDEF: 90, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 3, name: '龍蛋Lv150', level: 150, elemental: 0, elementallevel: 1, size: 1, StatusDEF: 75, WeaponDEF: 120, StatusMDEF: 37, WeaponMDEF: 120, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 4, name: '闇●盧恩騎士', level: 179, elemental: 1, elementallevel: 4, size: 1, StatusDEF: 189, WeaponDEF: 400, StatusMDEF: 57, WeaponMDEF: 200, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 5, name: '闇●十字斬首者', level: 179, elemental: 5, elementallevel: 4, size: 1, StatusDEF: 119, WeaponDEF: 160, StatusMDEF: 62, WeaponMDEF: 100, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 6, name: '闇●魅影追蹤者', level: 178, elemental: 5, elementallevel: 4, size: 1, StatusDEF: 119, WeaponDEF: 160, StatusMDEF: 57, WeaponMDEF: 100, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 7, name: '席琳基米', level: 150, elemental: 8, elementallevel: 1, size: 2, StatusDEF: 102, WeaponDEF: 479, StatusMDEF: 151, WeaponMDEF: 444, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 8, name: '闇答萊屍', level: 150, elemental: 9, elementallevel: 4, size: 2, StatusDEF: 120, WeaponDEF: 30, StatusMDEF: 159, WeaponMDEF: 40, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 9, name: '覺醒闇答萊屍', level: 180, elemental: 9, elementallevel: 4, size: 2, StatusDEF: 135, WeaponDEF: 30, StatusMDEF: 174, WeaponMDEF: 40, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                        { id: 10, name: '歐內斯特 斯特凡˙傑克', level: 160, elemental: 9, elementallevel: 1, size: 2, StatusDEF: 88, WeaponDEF: 146, StatusMDEF: 54, WeaponMDEF: 30, sizeResist: 0, levelResist: 0, elementalResist: 0, moneletResist: 0, rangedResist: 0, raceResist: 0, criResist: 0, doram: false },
                    );

                    this.KeywordReplaceList.push(
                        { str1: 'STR', str2: 'this.status_total.STR', description: '代入總STR' },
                        { str1: 'AGI', str2: 'this.status_total.AGI', description: '代入總AGI' },
                        { str1: 'VIT', str2: 'this.status_total.VIT', description: '代入總VIT' },
                        { str1: 'INT', str2: 'this.status_total.INT', description: '代入總INT' },
                        { str1: 'DEX', str2: 'this.status_total.DEX', description: '代入總DEX' },
                        { str1: 'LUK', str2: 'this.status_total.LUK', description: '代入總LUK' },
                        { str1: 'BLV', str2: 'this.status.Level', description: '代入角色基本等級' },
                        { str1: 'JLV', str2: 'this.status.JOBLevel', description: '代入角色職業等級' },
                        { str1: 'SLV', str2: 'this.skill.level', description: '代入技能等級' },
                        { str1: 'WLV', str2: 'this.weapon.level.id', description: '代入武器等級' },
                        { str1: 'WGT', str2: 'this.weapon.Weight', description: '代入武器重量' },
                        { str1: 'SHW', str2: 'this.weapon.ShieldWeight', description: '代入盾牌重量' },
                        { str1: 'MUL', str2: 'this.MulOper', description: 'MUL(A,B)為A*B, B若>1則無條件捨去, B若<1則無條件進位' },
                        { str1: 'DOWN', str2: 'Math.floor', description: 'DOWN(A) 小數點無條件捨去' },
                        { str1: 'UP', str2: 'Math.ceil', description: 'UP(A) 小數點無條件進位' },
                    );

                    this.SpecialthanksList.push(
                        { id: 0, coop: '公式協力', name: '賴喵' },
                        { id: 1, coop: '測試協力', name: '少爺 & 太太' },
                        { id: 2, coop: '測試協力', name: '夕華。' },
                        { id: 3, coop: '測試協力', name: '水絳' },
                        { id: 4, coop: '公式協力', name: '月夜魔女的貓兒@PTT' },
                        { id: 4, coop: '公式協力', name: '阿松' },
                    );
                },
                // 產生唯一碼 給存檔使用
                // https://cythilya.github.io/2017/03/12/uuid/
                _uuid() {
                    var d = Date.now();
                    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {
                        d += performance.now(); //use high-precision timer if available
                    }
                    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                        var r = (d + Math.random() * 16) % 16 | 0;
                        d = Math.floor(d / 16);
                        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
                    });
                }
            },
            computed: {
                
                StoreDB_EquipFiltered()
                {
                    var _tempgroup = this.StoreDB_EquipFliterGroup;
                    return _tempgroup.length > 0 ?
                        this.StoreDB_Equip.filter(
                        function (saverow) { 
                            return _tempgroup.indexOf( saverow.equip.label ) > -1;
                        }
                    ).sort( (a, b) => a.equip.label>b.equip.label? 1:
                        a.equip.label===b.equip.label?
                            ((a.date>b.date)?-1:1):-1
                    )
                    :
                    this.StoreDB_Equip
                    ;
                },
            },
            mounted() {
                console.log("mounted");
                this.LoadDB();
                this.attritube_init = Object.assign({}, this.attritube);
                this.status_add_init = Object.assign({}, this.status_add);
                this.status_total_init = Object.assign({}, this.status_total);
                this.option_init = Object.assign({}, this.option);

                this.enemyattribute = this.enemylist[0];
                this.effectdialogue.EffectType = this.effecttypelist[0];
                this.weapon = {
                    type: this.weapontypelist[0], level: this.weaponlevellist[0],
                    ATK: 0, MATK: 0, ArrowATK: 0, BulletATK: 0,
                    refinelevel: 0,
                    Weight: 0, ShieldWeight: 0,
                };
                this.ChangeWeapon();
                this.skilloption.AttackElementalIdx = 0;
                this.ComputElementalPercent();
                this.skill = { name: '', level: 1, formula: '(70*SLV+INT*3)*BLV/100', ranged: false, critical: false, hitnumber: 1, elemental: 0, };
                this.onSkillPercentChange();
            }

        })

        evue.$watch('enemyattribute', function (newB, oldB) {
            console.log("Watch enemyattribute ");
            this.ComputElementalPercent();
            this.ComputeSizefix();
        }, {
            deep: true
        });

        evue.$watch('weapon', function (newB, oldB) {
            console.log("Watch weapon ");
            if (this.weapon.ATK == '') this.weapon.ATK = 0;
            if (this.weapon.MATK == '') this.weapon.MATK = 0;
            if (this.weapon.ArrowATK == '') this.weapon.ArrowATK = 0;
            if (this.weapon.BulletATK == '') this.weapon.BulletATK = 0;
            if (this.weapon.refinelevel == '') this.weapon.refinelevel = 0;
            this.onOption();
        }, {
            deep: true
        });

    </script>

    <body>

</html>